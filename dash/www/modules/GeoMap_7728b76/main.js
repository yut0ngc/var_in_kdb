define(["jquery","topojson","d3","Handlebars","QuickBase","backbone","css!./css/app.css"],function(H,N,n,h,l,d){"use strict";var o,e=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),E=(a.getComponentDefinition=function(t){var e={TriggerColumn:{title:"Trigger Column",type:"string",enumSource:"possibleTrack",watch:{possibleTrack:"root.possibleTrack"},default:"",propertyOrder:1},Trigger:{type:"string",enum:["Click","Hover"],default:"Click",title:"Trigger Action",propertyOrder:2}},e={id:46,componentName:"Geo Map",componentDescription:"This element displays Map.",appKey:"GeoMap",css:"GeoMap",listViewThumb:t.websiteUrl+"Images/geomap.png",ghostViewThumb:null,buildViewThumb:null,appArgs:{quickStart:[{path:"MapDetails.MapKey",message:"set Google Maps JavaScript API Key in 'Map Key' Property"}],json:{version:"4.7.4",possibleFloats:["default"],possiblePLatLong:["default"],possibleStrings:["default"],possibleDKeys:["default"],possibleDValues:["default"],possibleGKeys:["default"],possibleDString:["default"],possibleVString:["default"],possibleHFloats:["default"],possibleLFloats:["default"],possibleLAll:[""],possibleTrack:["default"],possibleLabels:["none"],possibleShapes:["default"],possibleColors:["default"],possibleCircle:[],tooltips:"",all:["default"],vall:["default"],overlayall:["default"],overlayGeoJSONKeys:[""],Basics:{ComponentName:"GeoMap",Focus:"",Theme:"Dark"},MapDetails:{Type:"terrain",Zoom:8,CenterX:37.76,CenterY:-122.42,TrackChanges:!0,Bounds:"",CustomMarkers:"",MapKey:"",Style:""},OverLay:{ShowOverlay:!0,Data:"",DataDesc:"US Tourism Data",DataGeo:"USA",DataGeoId:"",DataType:"GeoJSON",DataKey:"",DataValue:"",GeoColumn:"states",Selected:"",ShowLegend:!0,LegendType:"percent",LegendColor:"blue",ColorDB:"",TooltipData:"",Bounds:"",GeoFilter:"",GeoSelected:"",SelectedObjectRouting:[],ImageSrc:"none",ImageNorth:0,ImageSouth:0,ImageEast:0,ImageWest:0,ImageOpacity:30},Voronoi:{Data:"",DataKey:"",DataDesc:"",Longitude:"",Latitude:"",AvgLongitude:"",AvgLatitude:"",LineColor:"#0061FF",DotColor:"#0061FF",ShowScale:!1,Scale:"",Opacity:.2,ScaleColor:"blue"},Points:{Data:"",Selected:"",Tracker:"",TrackedItem:"default",Title:"default",Latitude:"default",Longitude:"default",Shape:"default",ShapeColor:"#0061FF",ShapeCanRotation:!1,ShapeSize:10,ShapeHoverColor:"#0061FF",ShapeSelectedColor:"#0061FF",ShapeColorOpacity:100,ShapeHoverColorOpacity:100,ShapeSelectedColorOpacity:100,ClusterShape:"default",ClusterSize:"default",Cluster:!0,ShowTooltip:!0,TooltipData:"",Zoom:!0,ZoomBase:!1,Center:!0,PointsInView:!1,Actions:"",SelectedObjectRouting:[],Label:"none",LabelColor:"#ffffff",LabelSize:10},Bounds:[],Heatmap:{Data:"",Gradient:"default",Radius:20,Opacity:100,Show:!0},Lines:{Data:"",Selected:"",Color:"#0061FF",LabelColor:"#ffffff",LabelSize:10,LabelText:"",ShowTooltip:!0,ShowLabel:!0,Geodesic:!0,ShowInView:!1,GroupBy:"",DBColor:""},Circles:{Data:"",StrokeColor:"",StrokeWeight:"",StrokeOpacity:"",FillColor:"",FillOpacity:"",Radius:"",Latitude:"",Longitude:"",ShowTooltip:!1,Tooltip:""},Style:{advanced:""},Alignment:{paddingLeft:"0",paddingRight:"0",paddingTop:"0",paddingBottom:"0"},Format:{widgetTitle:"",titleFontSize:"16",titleHorizontal:"Center",titlePaddingLeft:0,titlePaddingRight:0,titlePaddingTop:0,titlePaddingBottom:0}},schema:{type:"object",title:"Properties",properties:{possible_screens:{type:"array",format:"table",items:{type:"object",properties:{title:{type:"string"},value:{type:"string"}}},options:{hidden:!0}},possible_dashboards:{type:"array",format:"table",items:{type:"object",properties:{title:{type:"string"},value:{type:"string"}}},options:{hidden:!0}},possible_viewstates:{type:"array",options:{hidden:!0}},possibleFloats:{type:"array",propertyOrder:1,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleStrings:{type:"array",propertyOrder:1,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleImageString:{type:"array",propertyOrder:1,format:"table",items:{type:"string"},default:["none"],options:{collapsed:!0,hidden:!0}},possibleDValues:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleDString:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleVString:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possiblePLatLong:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleHFloats:{type:"array",propertyOrder:1,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleLFloats:{type:"array",propertyOrder:1,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleLAll:{type:"array",propertyOrder:1,format:"table",items:{type:"string"},default:[""],options:{collapsed:!0,hidden:!0}},possibleTrack:{type:"array",propertyOrder:1,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleDKeys:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleGKeys:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleShapes:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleColors:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleCircle:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:[],options:{collapsed:!0,hidden:!0}},all:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},vall:{type:"array",propertyOrder:3,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},overlayall:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},possibleLabels:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["none"],options:{collapsed:!0,hidden:!0}},overlayGeoJSONKeys:{type:"array",propertyOrder:2,format:"table",items:{type:"string"},default:["default"],options:{collapsed:!0,hidden:!0}},tooltips:{type:"string",propertyOrder:2,default:"",options:{collapsed:!0,hidden:!0}},Basics:{type:"object",propertyOrder:3,title:"Basics",properties:{Focus:{type:"viewstate",title:"Focus",default:""},Theme:{type:"string",title:"Theme",enum:["Light","Dark"]},ComponentName:{title:"Component",type:"string",default:"label",options:{hidden:!0}}}},MapDetails:{type:"object",propertyOrder:4,title:"Map",options:{collapsed:!0},properties:{Type:{type:"string",title:"Map Type",default:"terrain",enum:["terrain","satellite","roadmap","hybrid"]},Zoom:{type:"number",title:"Scale",default:8,options:{disableViewStateBinding:!0}},CenterX:{type:"number",title:"CenterX",default:0,minimum:-85,maximum:85},CenterY:{type:"number",title:"CenterY",default:0,minimum:-180,maximum:180},TrackChanges:{type:"boolean",title:"Track changes",format:"checkbox"},Bounds:{type:"viewstate",title:"Bounds",default:""},CustomMarkers:{type:"viewstate",title:"Custom point",default:""},MapKey:{type:"string",title:"Map Key",default:"",format:"string"},Style:{type:"json",title:"Style JSON",default:""}}},OverLay:{type:"object",propertyOrder:9,title:"Overlay",options:{collapsed:!0},properties:{layerProperties:{title:"Choose Layer",additionalProperties:!1,options:{keep_oneof_values:!0},oneOf:[{title:"Statistical",type:"object",properties:{Data:{type:"data",format:"string",propertyOrder:1,title:"Data Source",default:""},DataKey:{type:"string",title:"Data Key",propertyOrder:2,enumSource:"d_key",watch:{d_key:"root.overlayall"}},DataValue:{type:"string",title:"Data Value",propertyOrder:3,enumSource:"d_value",watch:{d_value:"root.overlayall"}},DataGeo:{title:"GeoJSON url",propertyOrder:4,type:"string"},GeoColumn:{type:"string",title:"GeoJSON Key",propertyOrder:5,default:"states",enumSource:"d_value",watch:{d_value:"root.overlayGeoJSONKeys"}},ShowLegend:{type:"boolean",title:"Show Legend",propertyOrder:6,format:"checkbox"},Selected:{type:"viewstate",title:"Selected Value",propertyOrder:13,default:""},SelectedBounds:{type:"viewstate",title:"Selected Bounds Value",propertyOrder:13,default:""},LayerOpacity:{title:"Layer Opacity",propertyOrder:21,default:30,minimum:0,maximum:100,type:"number",step:1,format:"range"}}}]},ShowOverlay:{type:"boolean",title:"Show Overlay",propertyOrder:1,format:"checkbox",options:{hidden:!0}},DataDesc:{type:"string",title:"Data Description",propertyOrder:5,enumSource:"d_string",watch:{d_string:"root.possibleDString"},options:{hidden:!0}},Data:{type:"data",format:"string",propertyOrder:2,title:"Data Source",default:"",options:{hidden:!0}},DataType:{type:"string",title:"Data Type",default:"",propertyOrder:52,enum:["GeoJSON","Voronoi"],options:{hidden:!0}},DataKey:{type:"string",title:"Data Key",propertyOrder:3,enumSource:"d_key",watch:{d_key:"root.overlayall"},options:{hidden:!0}},DataGeoId:{type:"string",title:"Geo Data Source",propertyOrder:6,enumSource:"g_key",watch:{g_key:"root.possibleGKeys"},options:{hidden:!0}},DataValue:{type:"string",title:"Data Value",propertyOrder:4,enumSource:"d_value",watch:{d_value:"root.overlayall"},options:{hidden:!0}},DataGeo:{title:"GeoJSON url",propertyOrder:5,type:"string",options:{hidden:!0}},GeoColumn:{type:"string",title:"GeoJSON Key",propertyOrder:6,default:"states",enumSource:"d_value",watch:{d_value:"root.overlayGeoJSONKeys"},options:{hidden:!0}},GeoFilter:{type:"string",title:"Geo Data Filter",propertyOrder:7,default:"",options:{hidden:!0}},ShowLegend:{type:"boolean",title:"Color Scale",propertyOrder:8,format:"checkbox",options:{hidden:!0}},LegendType:{type:"string",format:"data",title:"Legend Type",propertyOrder:9,default:"percent",enum:["percent","range"],options:{hidden:!0}},LegendColor:{type:"string",format:"data",title:"Legend Colour",propertyOrder:10,default:"blue",enum:["blue","red","green","purple"],options:{hidden:!0}},ColorDB:{type:"string",propertyOrder:11,title:"Overlay Colour (From DB)",enumSource:"possible_colors",watch:{possible_colors:"root.possibleColors"},options:{hidden:!0}},TooltipData:{type:"tooltipTemplate",title:"Custom tooltip",propertyOrder:12,default:""},Selected:{type:"viewstate",title:"Selected Value",propertyOrder:13,default:"",options:{hidden:!0}},GeoSelected:{type:"viewstate",title:"Geo Filter Selected Value",propertyOrder:14,default:"",options:{hidden:!0}},Bounds:{type:"viewstate",title:"Bounds Selected",propertyOrder:15,default:"",options:{hidden:!0}},ImageSrc:{type:"string",title:"Image Source",propertyOrder:16,default:"",options:{hidden:!0}},ImageNorth:{type:"number",propertyOrder:17,title:"Image North Bound",default:0,options:{hidden:!0}},ImageSouth:{type:"number",propertyOrder:18,title:"Image South Bound",default:0,options:{hidden:!0}},ImageEast:{type:"number",propertyOrder:19,title:"Image East Bound",default:0,options:{hidden:!0}},ImageWest:{type:"number",propertyOrder:20,title:"Image West Bound",default:0,options:{hidden:!0}},ImageOpacity:{title:"Image Opacity",propertyOrder:21,default:30,minimum:0,maximum:100,type:"number",step:1,format:"range",options:{hidden:!0}},SelectedObjectRouting:{propertyOrder:22,type:"array",format:"table",title:"Selected Point ViewState Routing",options:{collapsed:!0},items:{type:"object",title:"Routing",properties:{ColumnProperty:{title:"Column",type:"string",enumSource:"possible_selected_columns",watch:{possible_selected_columns:"root.overlayall"}},ViewstateProperty:{title:"Viewstate",type:"viewstate"}}}}}},Voronoi:{type:"object",propertyOrder:8,title:"Voronoi",options:{collapsed:!0,hidden:!0},properties:{Data:{type:"data",format:"string",propertyOrder:1,title:"Data Source",default:""},DataKey:{type:"string",title:"Data Key",propertyOrder:2,enumSource:"d_key",watch:{d_key:"root.vall"}},DataDesc:{type:"string",title:"Description",propertyOrder:3,enumSource:"d_value",watch:{d_value:"root.possibleDValues"}},Longitude:{type:"string",title:"Longitude",propertyOrder:4,enumSource:"d_value",watch:{d_value:"root.possibleDValues"}},Latitude:{type:"string",title:"Latitude",propertyOrder:5,enumSource:"d_value",watch:{d_value:"root.possibleDValues"}},AvgLongitude:{type:"string",title:"Average Longitude",propertyOrder:6,enumSource:"d_value",watch:{d_value:"root.possibleDValues"}},AvgLatitude:{type:"string",title:"Average Latitude",propertyOrder:7,enumSource:"d_value",watch:{d_value:"root.possibleDValues"}},LineColor:{type:"gradient",propertyOrder:8,title:"Line Colour",default:"#0061FF",options:{gradient:!1}},DotColor:{type:"gradient",propertyOrder:9,title:"Point Colour",default:"#0061FF",options:{gradient:!1,hidden:!0}},ShowScale:{type:"boolean",title:"Show Scale",propertyOrder:10,format:"checkbox"},Scale:{title:"Scale Metric",propertyOrder:11,type:"string",enumSource:"d_value",watch:{d_value:"root.possibleDValues"}},Opacity:{title:"Scale Opacity",propertyOrder:12,default:1,minimum:0,maximum:10,type:"number",step:1,format:"range"},ScaleColor:{type:"string",format:"data",title:"Legend Colour",propertyOrder:13,default:"blue",enum:["blue","red","green","purple"]}}},Points:{type:"object",propertyOrder:5,title:"Points",options:{collapsed:!0},properties:{Data:{type:"data",format:"string",title:"Data Source",propertyOrder:1,default:""},Selected:{type:"viewstate",title:"Selected Value",default:"",propertyOrder:3},Tracker:{type:"viewstate",title:"Tracker",default:"",propertyOrder:4},TrackedItem:{type:"string",propertyOrder:5,title:"TrackedItem",enumSource:"possible_track",watch:{possible_track:"root.possibleTrack"}},Title:{type:"string",propertyOrder:2,title:"Selected Attr",enumSource:"possible_strings",watch:{possible_strings:"root.possibleTrack"}},Latitude:{type:"string",propertyOrder:6,title:"Latitude Data",enumSource:"possible_floats",watch:{possible_floats:"root.possiblePLatLong"}},Longitude:{type:"string",propertyOrder:7,title:"Longitude Data",enumSource:"possible_floats",watch:{possible_floats:"root.possiblePLatLong"}},Shape:{type:"string",title:"Shape",propertyOrder:8,enum:["default","dot","pointer","run","walk","directional","arrow_back","arrow_down","arrow_forward","arrow_up","send","rowing","boat","car","airplane","dining","mountain","cloud","cloud2","sun","flash","flag","heart","star","home","warning","directionArrow","square","buildings","dollar","happy","device","iphone","train","truck","gym","cake","city","hot"]},ShapeDB:{type:"string",propertyOrder:9,title:"Shape (From DB)",enumSource:"possible_shapes",watch:{possible_shapes:"root.possibleShapes"}},ShapeColor:{type:"gradient",propertyOrder:10,title:"Shape Colour",default:"#0061FF",options:{gradient:!1}},ShapeColorDB:{type:"string",propertyOrder:11,title:"Shape Colour (From DB)",enumSource:"possible_colors",watch:{possible_colors:"root.possibleColors"}},ShapeCanRotation:{type:"boolean",propertyOrder:11,title:"Rotate Shape",format:"checkbox",default:!1},ShapeRotation:{type:"string",propertyOrder:12,title:"Shape Rotation degrees",enumSource:"possible_shapes",watch:{possible_shapes:"root.possibleTrack"}},ShapeSize:{title:"Shape Size",default:10,minimum:1,maximum:200,propertyOrder:12,type:"number",step:1,format:"range",options:{hidden:!0}},ShapeColorOpacity:{title:"Shape Opacity",default:0,minimum:0,maximum:100,propertyOrder:13,type:"number",step:1,format:"range"},ShapeSelectedColor:{type:"gradient",propertyOrder:14,title:"Shape Colour (Selected)",default:"#0061FF",options:{gradient:!1}},ShapeSelectedColorOpacity:{title:"Shape Opacity (Selected)",default:0,minimum:0,maximum:100,propertyOrder:15,type:"number",step:1,format:"range",options:{hidden:!0}},ShapeHoverColor:{type:"gradient",propertyOrder:16,title:"Shape Colour (Hovered)",default:"#0061FF",options:{gradient:!1,hidden:!0}},ShapeHoverColorOpacity:{title:"Shape Opacity (Hovered)",default:0,minimum:0,maximum:100,propertyOrder:17,type:"number",step:1,format:"range",options:{hidden:!0}},ClusterShape:{type:"string",propertyOrder:18,title:"Cluster Shape",enum:["default","house","airplane","star","square","person","heart","globe"],options:{hidden:!0}},ClusterSize:{title:"Cluster Size",propertyOrder:18,type:"string",enum:["default","10","20","30","40","50","60","70"]},Cluster:{type:"boolean",propertyOrder:20,title:"Cluster",format:"checkbox"},ShowTooltip:{type:"boolean",propertyOrder:21,title:"Show Tooltip",format:"checkbox"},TooltipData:{type:"tooltipTemplate",title:"Custom tooltip",propertyOrder:22,default:"",templateItems:{values:{type:"object",items:_.keyBy(["pointTitle","pointColor","pointIcon","pointLatitude","pointLongitude","pointID"])}}},Zoom:{type:"boolean",propertyOrder:23,title:"Zoom on Select",format:"checkbox"},ZoomBase:{type:"boolean",propertyOrder:24,title:"Single Zoom on Cluster",format:"checkbox"},Center:{type:"boolean",propertyOrder:25,title:"Center on Select",format:"checkbox"},Actions:{type:"actions",fields:{map:_.extend({Current:{title:"Trigger Source",type:"string",enum:["*"],default:"*",propertyOrder:10}},e),nav:e,query:e,url:e}},PointsInView:{type:"boolean",propertyOrder:30,title:"Points in View",format:"checkbox"},SelectedObjectRouting:{propertyOrder:31,type:"array",format:"table",title:"Selected Point ViewState Routing",options:{collapsed:!0,hidden:!0},items:{type:"object",title:"Routing",properties:{ColumnProperty:{title:"Column",type:"string",enumSource:"possible_selected_columns",watch:{possible_selected_columns:"root.possibleTrack"}},ViewstateProperty:{title:"Viewstate",type:"viewstate"}}}},Label:{propertyOrder:30,title:"Label",type:"string",enumSource:"possible_labels",watch:{possible_labels:"root.possibleLabels"},default:"none"},LabelColor:{type:"gradient",propertyOrder:31,title:"Label Color",default:"#ffffff",options:{gradient:!1}},LabelSize:{title:"Label Font Size",default:10,propertyOrder:32,type:"number"}}},Circles:{type:"object",propertyOrder:6,title:"Circles",options:{collapsed:!0},properties:{Data:{type:"data",format:"string",title:"Data Source",propertyOrder:1,default:""},Radius:{type:"string",propertyOrder:2,title:"Radius",enumSource:"possible_circle",watch:{possible_circle:"root.possibleCircle"}},Latitude:{type:"string",propertyOrder:3,title:"Latitude",enumSource:"possible_circle",watch:{possible_circle:"root.possibleCircle"}},Longitude:{type:"string",propertyOrder:4,title:"Longitude",enumSource:"possible_circle",watch:{possible_circle:"root.possibleCircle"}},StrokeColor:{type:"string",propertyOrder:5,title:"Circumference Color",enumSource:"possible_circle",watch:{possible_circle:"root.possibleCircle"}},StrokeOpacity:{type:"string",propertyOrder:6,title:"Circumference Opacity",enumSource:"possible_circle",watch:{possible_circle:"root.possibleCircle"}},StrokeWeight:{type:"string",propertyOrder:7,title:"Circumference Width",enumSource:"possible_circle",watch:{possible_circle:"root.possibleCircle"}},FillColor:{type:"string",propertyOrder:8,title:"Color",enumSource:"possible_circle",watch:{possible_circle:"root.possibleCircle"}},FillOpacity:{type:"string",propertyOrder:9,title:"Opacity",enumSource:"possible_circle",watch:{possible_circle:"root.possibleCircle"}},ShowTooltip:{type:"boolean",default:!1,propertyOrder:10,title:"Show Tooltip",format:"checkbox"},Tooltip:{type:"tooltipTemplate",title:"Custom tooltip",propertyOrder:11,default:""}}},Heatmap:{type:"object",propertyOrder:7,title:"Heatmap",options:{collapsed:!0},properties:{Data:{type:"data",format:"string",propertyOrder:1,title:"Data Source",default:""},Latitude:{type:"string",propertyOrder:2,title:"Latitude Data",enumSource:"possible_floats",watch:{possible_floats:"root.possibleHFloats"}},Longitude:{type:"string",propertyOrder:3,title:"Longitude Data",enumSource:"possible_floats",watch:{possible_floats:"root.possibleHFloats"}},Weight:{type:"string",propertyOrder:4,title:"Weight",enumSource:"possible_floats",watch:{possible_floats:"root.possibleHFloats"}},Opacity:{title:"Opacity",default:50,minimum:0,maximum:100,propertyOrder:5,type:"number",step:1,format:"range"},Gradient:{title:"Gradient",propertyOrder:6,default:"default",enum:["default","blue-red","red-blue"],type:"string"},Radius:{title:"Radius",default:20,minimum:1,maximum:50,propertyOrder:7,type:"number",step:1,format:"range"},Show:{type:"boolean",propertyOrder:8,title:"Show Heatmap",format:"checkbox"}}},Lines:{type:"object",propertyOrder:6,title:"Lines",options:{collapsed:!0},properties:{Data:{type:"data",format:"string",propertyOrder:1,title:"Data Source",default:""},Latitude:{type:"string",propertyOrder:2,title:"Latitude Data",enumSource:"possible_floats",watch:{possible_floats:"root.possibleLFloats"}},Longitude:{type:"string",propertyOrder:3,title:"Longitude Data",enumSource:"possible_floats",watch:{possible_floats:"root.possibleLFloats"}},Selected:{type:"viewstate",propertyOrder:4,title:"Selected Value",default:"",options:{hidden:!0}},Color:{type:"gradient",propertyOrder:5,title:"Colour",default:"#0061FF",options:{gradient:!1}},DBColor:{type:"string",propertyOrder:5,title:"Use Data Color",enumSource:"possible_l_all",watch:{possible_l_all:"root.possibleLAll"}},LabelColor:{type:"gradient",propertyOrder:6,title:"Label Color",default:"#ffffff",options:{gradient:!1,hidden:!0}},LabelSize:{title:"Label Size",propertyOrder:7,default:0,minimum:4,maximum:14,type:"number",step:1,format:"range"},LabelText:{type:"tooltipTemplate",propertyOrder:8,title:"Tooltip"},ShowLabel:{type:"boolean",propertyOrder:9,title:"Show Label",format:"checkbox",options:{hidden:!0}},ShowTooltip:{type:"boolean",propertyOrder:10,title:"Show Tooltip",format:"checkbox"},Geodesic:{type:"boolean",propertyOrder:11,title:"Geodesic",format:"checkbox"},ShowInView:{type:"boolean",propertyOrder:9,title:"Show In View",format:"checkbox"},GroupBy:{type:"string",propertyOrder:10,title:"Group by",enumSource:"possible_l_all",watch:{possible_l_all:"root.possibleLAll"}}}},Bounds:{type:"array",format:"object",title:"Rectangle Bounds",propertyOrder:10,uniqueItems:!1,options:{collapsed:!0},items:{type:"object",title:"Bounds",properties:{North:{type:"number",default:38,propertyOrder:1},South:{type:"number",default:35,propertyOrder:3},East:{type:"number",default:-120,propertyOrder:4},West:{type:"number",default:-123,propertyOrder:5}}}},Style:{type:"object",propertyOrder:10,title:"Style",options:{collapsed:!0},properties:{advanced:{type:"css",title:"Advanced CSS",default:""}}},Alignment:{type:"object",propertyOrder:11,title:"Margins",options:{collapsed:!0},properties:{paddingLeft:{type:"number",title:"Padding Left",default:0,format:"number"},paddingRight:{type:"number",title:"Padding Right",default:0,format:"number"},paddingTop:{type:"number",title:"Padding Top",default:0,format:"number"},paddingBottom:{type:"number",title:"Padding Bottom",default:0,format:"number"}}},Format:{type:"object",propertyOrder:12,title:"Format",options:{collapsed:!0,hidden:!0},properties:{widgetTitle:{type:"string",propertyOrder:9,title:"Title"},titleFontSize:{type:"number",propertyOrder:11,title:"Title Font Size",format:"number"},titleHorizontal:{type:"string",propertyOrder:12,title:"Title Horizontal Align",enum:["Left","Center","Right"]},titlePaddingLeft:{type:"number",propertyOrder:13,title:"Title Padding Left",default:0,format:"number"},titlePaddingRight:{type:"number",propertyOrder:14,title:"Title Padding Right",default:0,format:"number"},titlePaddingTop:{type:"number",propertyOrder:15,title:"Title Padding Top",default:0,format:"number"},titlePaddingBottom:{type:"number",propertyOrder:16,title:"Title Padding Bottom",default:0,format:"number"}}}}}}};if(0<_.keys(t.settingsModel.attributes).length)for(var i=_.find(a.upgrades,{version:t.settingsModel.get("version")}),o=_.isNil(i)?1:a.upgrades.indexOf(i)+1;o<a.upgrades.length;o+=1){var r=a.upgrades[o];r.fn(t.settingsModel),t.settingsModel.set("version",r.version)}return e},a.upgrades=[{version:"4.1.0",fn:function(t){var e=t.get("MapDetails");e.MapKey=void 0===e.MapKey?"":e.MapKey,t.set("MapDetails",e)}},{version:"4.2.0",fn:function(t){var e=t.get("Points"),i=[],o=e.TargetDashboardScreen;(o&&o.dashboard&&"<none>"!==o.dashboard||o.value)&&i.push(_.extend({_Type:"nav"},o)),e.Actions=void 0===e.Actions?i:e.Actions,t.set("Points",_.omit(e,"TargetDashboardScreen","TargetDashboard","TargetScreen","SelectedObjectRouting","TargetDashboardId")),t.unset("Points.TargetDashboardScreen"),t.unset("Points.TargetDashboard"),t.unset("Points.TargetScreen"),t.unset("Points.SelectedObjectRouting"),t.unset("Points.TargetDashboardId")}},{version:"4.3.0",fn:function(t){var e=t.get("Circles"),i=t.get("possibleCircle");void 0===e&&(e={Data:"",StrokeColor:"",StrokeWeight:"",StrokeOpacity:"",FillColor:"",FillOpacity:"",Radius:"",Latitude:"",Longitude:"",ShowTooltip:!1,Tooltip:""}),t.set("possibleCircle",i=void 0===i?[]:i),t.set("Circles",e)}},{version:"4.4.0",fn:function(t){var e=t.get("MapDetails"),i=t.get("Lines"),o=t.get("Points");e.Style=void 0===e.Style?"":e.Style,i.Geodesic=void 0===i.Geodesic||i.Geodesic,o.ShapeCanRotation=void 0!==o.ShapeCanRotation&&o.ShapeCanRotation,o.ShapeRotation=void 0===o.ShapeRotation?0:o.ShapeRotation,t.set("MapDetails",e),t.set("Lines",i),t.set("Points",o)}},{version:"4.7.1",fn:function(t){t=t.get("Points");t.ShapeCanRotation=void 0!==t.ShapeCanRotation&&t.ShapeCanRotation}},{version:"4.7.3",fn:function(t){t=t.get("Points");t.LabelColor=_.isNil(t.LabelColor)?"#ffffff":t.LabelColor,t.LabelSize=_.isNil(t.LabelSize)?10:t.LabelSize,t.Label=_.isNil(t.Label)?"none":t.LabelColor}},{version:"4.7.4",fn:function(t){t=t.get("Lines");t.ShowInView=!_.isNil(t.ShowInView)&&t.ShowInView,t.GroupBy=_.isNil(t.GroupBy)?"":t.GroupBy,t.DBColor=_.isNil(t.DBColor)?"":t.DBColor}}],a);function a(){}i.app=h.template({compiler:[8,">= 4.3.0"],main:function(t,e,i,o,r){return'<div class="GeoMap">\n    \n    <div class="title">\n    </div>\n\n    <div class="frame">\n      \x3c!--  <input id="pac-input" class="controls" type="text" placeholder="Search Box">--\x3e\n        <div  class="nicebox controls" style="display: none;">\n            <div class="legend">\n               \n                <div class="color-key"><span class="data-caret">&#x25c6;</span></div>\n                </div>\n        </div>\n       \n        <div class="googleMap">\n           \n        </div>\n    </div>\n</div>'},useData:!0});var G=i;function i(){}function p(t){this.extend(p,google.maps.OverlayView),this.tabs_=[],this.activeTab_=null,this.baseZIndex_=100,this.isOpen_=!1;t=t||{};null==t.backgroundColor&&(t.backgroundColor=this.BACKGROUND_COLOR_),null==t.borderColor&&(t.borderColor=this.BORDER_COLOR_),null==t.borderRadius&&(t.borderRadius=this.BORDER_RADIUS_),null==t.borderWidth&&(t.borderWidth=this.BORDER_WIDTH_),null==t.padding&&(t.padding=this.PADDING_),null==t.arrowPosition&&(t.arrowPosition=this.ARROW_POSITION_),null==t.disableAutoPan&&(t.disableAutoPan=!1),null==t.disableAnimation&&(t.disableAnimation=!1),null==t.minWidth&&(t.minWidth=this.MIN_WIDTH_),null==t.shadowStyle&&(t.shadowStyle=this.SHADOW_STYLE_),null==t.arrowSize&&(t.arrowSize=this.ARROW_SIZE_),null==t.arrowStyle&&(t.arrowStyle=this.ARROW_STYLE_),this.buildDom_(),this.setValues(t)}(window.InfoBubble=p).prototype.ARROW_SIZE_=15,p.prototype.ARROW_STYLE_=0,p.prototype.SHADOW_STYLE_=1,p.prototype.MIN_WIDTH_=50,p.prototype.ARROW_POSITION_=50,p.prototype.PADDING_=10,p.prototype.BORDER_WIDTH_=1,p.prototype.BORDER_COLOR_="#ccc",p.prototype.BORDER_RADIUS_=10,p.prototype.BACKGROUND_COLOR_="#fff",p.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},p.prototype.buildDom_=function(){var t=this.bubble_=document.createElement("DIV");t.style.position="absolute",t.style.zIndex=this.baseZIndex_;(this.tabsContainer_=document.createElement("DIV")).style.position="relative";var e=this.close_=document.createElement("IMG"),i=(e.style.position="absolute",e.style.width=this.px(12),e.style.height=this.px(12),e.style.border=0,e.style.zIndex=this.baseZIndex_+1,e.style.cursor="pointer",e.src="//maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif",this.clickEvent(),this.contentContainer_=document.createElement("DIV")),o=(i.style.overflowX="auto",i.style.overflowY="auto",i.style.cursor="default",i.style.clear="both",i.style.position="relative",this.content_=document.createElement("DIV")),o=(i.appendChild(o),this.arrow_=document.createElement("DIV")),r=(o.style.position="relative",this.arrowOuter_=document.createElement("DIV")),a=this.arrowInner_=document.createElement("DIV"),s=this.getArrowSize_(),s=(r.style.position=a.style.position="absolute",r.style.left=a.style.left="50%",r.style.height=a.style.height="0",r.style.width=a.style.width="0",r.style.marginLeft=this.px(-s),r.style.borderWidth=this.px(s),r.style.borderBottomWidth=0,this.bubbleShadow_=document.createElement("DIV")),s=(s.style.position="absolute",t.style.display=s.style.display="none",t.appendChild(this.tabsContainer_),t.appendChild(e),t.appendChild(i),o.appendChild(r),o.appendChild(a),t.appendChild(o),document.createElement("style")),e=(s.setAttribute("type","text/css"),this.animationName_="_ibani_"+Math.round(1e4*Math.random()),"."+this.animationName_+"{-webkit-animation-name:"+this.animationName_+";-webkit-animation-duration:0.5s;-webkit-animation-iteration-count:1;}@-webkit-keyframes "+this.animationName_+" {from {-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% {-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}");s.textContent=e,document.getElementsByTagName("head")[0].appendChild(s)},p.prototype.clickEvent=function(){var t=this;google.maps.event.addDomListener(this.close_,"click",function(){t.close(),google.maps.event.trigger(t,"closeclick")})},p.prototype.setBackgroundClassName=function(t){this.set("backgroundClassName",t)},p.prototype.backgroundClassName_changed=function(){this.content_.className=this.get("backgroundClassName")},p.prototype.setTabClassName=function(t){this.set("tabClassName",t)},p.prototype.tabClassName_changed=function(){this.updateTabStyles_()},p.prototype.getArrowStyle_=function(){return parseInt(this.get("arrowStyle"),10)||0},p.prototype.setArrowStyle=function(t){this.set("arrowStyle",t)},p.prototype.arrowStyle_changed=function(){this.arrowSize_changed()},p.prototype.getArrowSize_=function(){return parseInt(this.get("arrowSize"),10)||0},p.prototype.setArrowSize=function(t){this.set("arrowSize",t)},p.prototype.arrowSize_changed=function(){this.borderWidth_changed()},p.prototype.setArrowPosition=function(t){this.set("arrowPosition",t)},p.prototype.getArrowPosition_=function(){return parseInt(this.get("arrowPosition"),10)||0},p.prototype.arrowPosition_changed=function(){var t=this.getArrowPosition_();this.arrowOuter_.style.left=this.arrowInner_.style.left=t+"%",this.redraw_()},p.prototype.setZIndex=function(t){this.set("zIndex",t)},p.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.baseZIndex_},p.prototype.zIndex_changed=function(){var t=this.getZIndex();this.bubble_.style.zIndex=this.baseZIndex_=t,this.close_.style.zIndex=t+1},p.prototype.setShadowStyle=function(t){this.set("shadowStyle",t)},p.prototype.getShadowStyle_=function(){return parseInt(this.get("shadowStyle"),10)||0},p.prototype.shadowStyle_changed=function(){this.getShadowStyle_();this.bubbleShadow_.style.boxShadow=this.bubbleShadow_.style.webkitBoxShadow=this.bubbleShadow_.style.MozBoxShadow="40px 15px 10px rgba(33,33,33,0.3)",this.bubbleShadow_.style.backgroundColor="transparent",this.isOpen_&&(this.bubbleShadow_.style.display="",this.draw())},p.prototype.showCloseButton=function(){this.set("hideCloseButton",!1)},p.prototype.hideCloseButton=function(){this.set("hideCloseButton",!0)},p.prototype.hideCloseButton_changed=function(){this.close_.style.display=this.get("hideCloseButton")?"none":""},p.prototype.setBackgroundColor=function(t){t&&this.set("backgroundColor",t)},p.prototype.backgroundColor_changed=function(){var t=this.get("backgroundColor");this.contentContainer_.style.backgroundColor=t,this.arrowInner_.style.borderColor=t+" transparent transparent",this.updateTabStyles_()},p.prototype.setBorderColor=function(t){t&&this.set("borderColor",t)},p.prototype.borderColor_changed=function(){var t=this.get("borderColor"),e=this.contentContainer_,i=this.arrowOuter_;e.style.borderColor=t,i.style.borderColor=t+" transparent transparent",e.style.borderStyle=i.style.borderStyle=this.arrowInner_.style.borderStyle="solid",this.updateTabStyles_()},p.prototype.setBorderRadius=function(t){this.set("borderRadius",t)},p.prototype.getBorderRadius_=function(){return parseInt(this.get("borderRadius"),10)||0},p.prototype.borderRadius_changed=function(){var t=this.getBorderRadius_(),e=this.getBorderWidth_();this.contentContainer_.style.borderRadius=this.contentContainer_.style.MozBorderRadius=this.contentContainer_.style.webkitBorderRadius=this.bubbleShadow_.style.borderRadius=this.bubbleShadow_.style.MozBorderRadius=this.bubbleShadow_.style.webkitBorderRadius=this.px(t),this.tabsContainer_.style.paddingLeft=this.tabsContainer_.style.paddingRight=this.px(t+e),this.redraw_()},p.prototype.getBorderWidth_=function(){return parseInt(this.get("borderWidth"),10)||0},p.prototype.setBorderWidth=function(t){this.set("borderWidth",t)},p.prototype.borderWidth_changed=function(){var t=this.getBorderWidth_();this.contentContainer_.style.borderWidth=this.px(t),this.tabsContainer_.style.top=this.px(t),this.updateArrowStyle_(),this.updateTabStyles_(),this.borderRadius_changed(),this.redraw_()},p.prototype.updateArrowStyle_=function(){var t=this.getBorderWidth_(),e=this.getArrowSize_(),i=this.getArrowStyle_(),o=this.px(e),r=this.px(Math.max(0,e-t)),a=this.arrowOuter_,s=this.arrowInner_;this.arrow_.style.marginTop=this.px(-t),a.style.borderTopWidth=o,s.style.borderTopWidth=r,0==i||1==i?(a.style.borderLeftWidth=o,s.style.borderLeftWidth=r):a.style.borderLeftWidth=s.style.borderLeftWidth=0,0==i||2==i?(a.style.borderRightWidth=o,s.style.borderRightWidth=r):a.style.borderRightWidth=s.style.borderRightWidth=0,i<2?(a.style.marginLeft=this.px(-e),s.style.marginLeft=this.px(-(e-t))):a.style.marginLeft=s.style.marginLeft=0,a.style.display=0==t?"none":""},p.prototype.setPadding=function(t){this.set("padding",t)},p.prototype.getPadding_=function(){return parseInt(this.get("padding"),10)||0},p.prototype.padding_changed=function(){var t=this.getPadding_();this.contentContainer_.style.padding=this.px(t),this.updateTabStyles_(),this.redraw_()},p.prototype.px=function(t){return t&&t+"px"},p.prototype.addEvents_=function(){var t=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"],e=this.bubble_;this.listeners_=[];for(var i,o=0;i=t[o];o++)this.listeners_.push(google.maps.event.addDomListener(e,i,function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}))},p.prototype.onAdd=function(){this.bubble_||this.buildDom_(),this.addEvents_();var t=this.getPanes();t&&(t.floatPane.appendChild(this.bubble_),t.floatShadow.appendChild(this.bubbleShadow_))},p.prototype.setBubbleOffset=function(t,e){this.bubbleOffsetX=parseInt(t),this.bubbleOffsetY=parseInt(e)},p.prototype.getBubbleOffset=function(){return{x:this.bubbleOffsetX||0,y:this.bubbleOffsetY||0}},p.prototype.draw=function(){var t,e,i,o,r,a,s=this.getProjection();s&&((o=this.get("position"))?(t=0,this.activeTab_&&(t=this.activeTab_.offsetHeight),a=this.getAnchorHeight_(),e=this.getArrowSize_(),i=this.getArrowPosition_(),i/=100,s=s.fromLatLngToDivPixel(o),o=this.contentContainer_.offsetWidth,r=this.bubble_.offsetHeight,o&&(r=s.y-(r+e)+this.getBubbleOffset().y,a&&(r-=a),a=s.x-o*i+this.getBubbleOffset().x,this.bubble_.style.top=this.px(r),this.bubble_.style.left=this.px(a),parseInt(this.get("shadowStyle"),10),this.bubbleShadow_.style.top=this.px(r+t-1),this.bubbleShadow_.style.left=this.px(a),this.bubbleShadow_.style.width=this.px(o),this.bubbleShadow_.style.height=this.px(this.contentContainer_.offsetHeight-e))):this.close())},p.prototype.onRemove=function(){this.bubble_&&this.bubble_.parentNode&&this.bubble_.parentNode.removeChild(this.bubble_),this.bubbleShadow_&&this.bubbleShadow_.parentNode&&this.bubbleShadow_.parentNode.removeChild(this.bubbleShadow_);for(var t,e=0;t=this.listeners_[e];e++)google.maps.event.removeListener(t)},p.prototype.isOpen=function(){return this.isOpen_},p.prototype.close=function(){this.bubble_&&(this.bubble_.style.display="none",this.bubble_.className=this.bubble_.className.replace(this.animationName_,"")),this.bubbleShadow_&&(this.bubbleShadow_.style.display="none",this.bubbleShadow_.className=this.bubbleShadow_.className.replace(this.animationName_,"")),this.isOpen_=!1},p.prototype.open=function(t,e){var i=this;window.setTimeout(function(){i.open_(t,e)},0)},p.prototype.open_=function(t,e){var i;this.updateContent_(),t&&this.setMap(t),e&&(this.set("anchor",e),this.bindTo("anchorPoint",e),this.bindTo("position",e)),this.bubble_.style.display=this.bubbleShadow_.style.display="",this.get("disableAnimation")||(this.bubble_.className+=" "+this.animationName_,this.bubbleShadow_.className+=" "+this.animationName_),this.redraw_(),this.isOpen_=!0,this.get("disableAutoPan")||(i=this,window.setTimeout(function(){i.panToView()},200))},p.prototype.setPosition=function(t){t&&this.set("position",t)},p.prototype.getPosition=function(){return this.get("position")},p.prototype.position_changed=function(){this.draw()},p.prototype.panToView=function(){var t,e,i,o,r,a,s=this.getProjection();s&&this.bubble_&&(o=this.getAnchorHeight_(),o=this.bubble_.offsetHeight+o,r=(t=this.get("map")).getDiv().offsetHeight,e=this.getPosition(),a=s.fromLatLngToContainerPixel(t.getCenter()),i=s.fromLatLngToContainerPixel(e),o=a.y-o,r=r-a.y,o<(a=0)&&(a=((o*=-1)+r)/2),i.y-=a,e=s.fromContainerPixelToLatLng(i),t.getCenter()!=e)&&t.panTo(e)},p.prototype.htmlToDocumentFragment_=function(t){t=t.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var e=document.createElement("DIV");if(e.innerHTML=t,1==e.childNodes.length)return e.removeChild(e.firstChild);for(var i=document.createDocumentFragment();e.firstChild;)i.appendChild(e.firstChild);return i},p.prototype.removeChildren_=function(t){if(t)for(var e;e=t.firstChild;)t.removeChild(e)},p.prototype.setContent=function(t){this.set("content",t)},p.prototype.getContent=function(){return this.get("content")},p.prototype.updateContent_=function(){if(this.content_){this.removeChildren_(this.content_);var t=this.getContent();if(t){"string"==typeof t&&(t=this.htmlToDocumentFragment_(t)),this.content_.appendChild(t);for(var e,i=this,o=this.content_.getElementsByTagName("IMG"),r=0;e=o[r];r++)google.maps.event.addDomListener(e,"load",function(){i.imageLoaded_()});google.maps.event.trigger(this,"domready")}this.redraw_()}},p.prototype.imageLoaded_=function(){var t=!this.get("disableAutoPan");this.redraw_(),!t||0!=this.tabs_.length&&0!=this.activeTab_.index||this.panToView()},p.prototype.updateTabStyles_=function(){if(this.tabs_&&this.tabs_.length){for(var t,e=0;t=this.tabs_[e];e++)this.setTabStyle_(t.tab);this.activeTab_.style.zIndex=this.baseZIndex_;var i=this.getBorderWidth_(),o=this.getPadding_()/2;this.activeTab_.style.borderBottomWidth=0,this.activeTab_.style.paddingBottom=this.px(o+i)}},p.prototype.setTabStyle_=function(t){var e,i=this.get("backgroundColor"),o=this.get("borderColor"),r=this.getBorderRadius_(),a=this.getBorderWidth_(),s=this.getPadding_(),n=this.px(-Math.max(s,r)),r=this.px(r),l=this.baseZIndex_,p=(t.index&&(l-=t.index),{cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:i,border:this.px(a)+" solid "+o,padding:this.px(s/2)+" "+this.px(s),marginRight:n,whiteSpace:"nowrap",borderRadiusTopLeft:r,MozBorderRadiusTopleft:r,webkitBorderTopLeftRadius:r,borderRadiusTopRight:r,MozBorderRadiusTopright:r,webkitBorderTopRightRadius:r,zIndex:l,display:"inline"});for(e in p)t.style[e]=p[e];i=this.get("tabClassName");null!=i&&(t.className+=" "+i)},p.prototype.addTabActions_=function(t){var e=this;t.listener_=google.maps.event.addDomListener(t,"click",function(){e.setTabActive_(this)})},p.prototype.setTabActive=function(t){t=this.tabs_[t-1];t&&this.setTabActive_(t.tab)},p.prototype.setTabActive_=function(t){var e,i,o;t?(e=this.getPadding_()/2,i=this.getBorderWidth_(),this.activeTab_&&((o=this.activeTab_).style.zIndex=this.baseZIndex_-o.index,o.style.paddingBottom=this.px(e),o.style.borderBottomWidth=this.px(i)),t.style.zIndex=this.baseZIndex_,t.style.borderBottomWidth=0,t.style.marginBottomWidth="-10px",t.style.paddingBottom=this.px(e+i),this.setContent(this.tabs_[t.index].content),this.updateContent_(),this.activeTab_=t,this.redraw_()):(this.setContent(""),this.updateContent_())},p.prototype.setMaxWidth=function(t){this.set("maxWidth",t)},p.prototype.maxWidth_changed=function(){this.redraw_()},p.prototype.setMaxHeight=function(t){this.set("maxHeight",t)},p.prototype.maxHeight_changed=function(){this.redraw_()},p.prototype.setMinWidth=function(t){this.set("minWidth",t)},p.prototype.minWidth_changed=function(){this.redraw_()},p.prototype.setMinHeight=function(t){this.set("minHeight",t)},p.prototype.minHeight_changed=function(){this.redraw_()},p.prototype.addTab=function(t,e){var i=document.createElement("DIV");i.innerHTML=t,this.setTabStyle_(i),this.addTabActions_(i),this.tabsContainer_.appendChild(i),this.tabs_.push({label:t,content:e,tab:i}),i.index=this.tabs_.length-1,i.style.zIndex=this.baseZIndex_-i.index,this.activeTab_||this.setTabActive_(i),i.className=i.className+" "+this.animationName_+" infoBubble",this.redraw_()},p.prototype.updateTab=function(t,e,i){!this.tabs_.length||t<0||t>=this.tabs_.length||(t=this.tabs_[t],null!=e&&(t.tab.innerHTML=t.label=e),null!=i&&(t.content=i),this.activeTab_==t.tab&&(this.setContent(t.content),this.updateContent_()),this.redraw_())},p.prototype.removeTab=function(t){if(!(!this.tabs_.length||t<0||t>=this.tabs_.length)){var e=this.tabs_[t];e.tab.parentNode.removeChild(e.tab),google.maps.event.removeListener(e.tab.listener_),this.tabs_.splice(t,1);for(var i,o=0;i=this.tabs_[o];o++)i.tab.index=o;e.tab==this.activeTab_&&(this.tabs_[t]?this.activeTab_=this.tabs_[t].tab:this.tabs_[t-1]?this.activeTab_=this.tabs_[t-1].tab:this.activeTab_=void 0,this.setTabActive_(this.activeTab_)),this.redraw_()}},p.prototype.getElementSize_=function(t,e,i){var o=document.createElement("DIV"),t=(o.style.display="inline",o.style.position="absolute",o.style.visibility="hidden","string"==typeof t?o.innerHTML=t:o.appendChild(t.cloneNode(!0)),document.body.appendChild(o),new google.maps.Size(o.offsetWidth,o.offsetHeight));return e&&t.width>e&&(o.style.width=this.px(e),t=new google.maps.Size(o.offsetWidth,o.offsetHeight)),i&&t.height>i&&(o.style.height=this.px(i),t=new google.maps.Size(o.offsetWidth,o.offsetHeight)),document.body.removeChild(o),t},p.prototype.redraw_=function(){this.figureOutSize_(),this.positionCloseButton_(),this.draw()},p.prototype.figureOutSize_=function(){var t=this.get("map");if(t){var e=this.getPadding_(),i=(this.getBorderWidth_(),this.getBorderRadius_(),this.getArrowSize_()),t=t.getDiv(),o=2*i,r=t.offsetWidth-o,t=t.offsetHeight-o-this.getAnchorHeight_(),a=0,s=this.get("minWidth")||0,n=this.get("minHeight")||0,l=this.get("maxWidth")||0,p=this.get("maxHeight")||0,l=Math.min(r,l),p=Math.min(t,p),h=0;if(this.tabs_.length)for(var d,c=0;d=this.tabs_[c];c++){var u=this.getElementSize_(d.tab,l,p),y=this.getElementSize_(d.content,l,p);s<u.width&&(s=u.width),h+=u.width,n<u.height&&(n=u.height),u.height>a&&(a=u.height),s<y.width&&(s=y.width),n<y.height&&(n=y.height)}else{o=this.get("content");(o="string"==typeof o?this.htmlToDocumentFragment_(o):o)&&(s<(y=this.getElementSize_(o,l,p)).width&&(s=y.width),n<y.height)&&(n=y.height)}l&&(s=Math.min(s,l)),p&&(n=Math.min(n,p)),(s=Math.max(s,h))==h&&(s+=2*e),i*=2,r<(s=Math.max(s,i))&&(s=r),t<n&&(n=t-a),this.tabsContainer_&&(this.tabHeight_=a,this.tabsContainer_.style.width=this.px(h)),this.contentContainer_.style.width=this.px(s),this.contentContainer_.style.height=this.px(n)}},p.prototype.getAnchorHeight_=function(){if(this.get("anchor")){var t=this.get("anchorPoint");if(t)return-1*t.y}return 0},p.prototype.anchorPoint_changed=function(){this.draw()},p.prototype.positionCloseButton_=function(){this.getBorderRadius_();var t=this.getBorderWidth_(),e=2,i=2,t=(this.tabs_.length&&this.tabHeight_&&(i+=this.tabHeight_),i+=t,e+=t,this.contentContainer_),e=$(t).width();t&&t.clientHeight<t.scrollHeight&&(e-=15),this.close_.style.left=this.px(e),this.close_.style.top=this.px(i)};var r,c={SVG_MAP:{arrow_back:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",arrow_down:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z",arrow_forward:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z",arrow_up:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z",send:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z",directional:"M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z",rowing:"M8.5 14.5L4 19l1.5 1.5L9 17h2l-2.5-2.5zM15 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 20.01L18 24l-2.99-3.01V19.5l-7.1-7.09c-.31.05-.61.07-.91.07v-2.16c1.66.03 3.61-.87 4.67-2.04l1.4-1.55c.19-.21.43-.38.69-.5.29-.14.62-.23.96-.23h.03C15.99 6.01 17 7.02 17 8.26v5.75c0 .84-.35 1.61-.92 2.16l-3.58-3.58v-2.27c-.63.52-1.43 1.02-2.29 1.39L16.5 18H18l3 3.01z",run:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z",walk:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7",boat:"M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2h-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19zM6 6h12v3.97L12 8 6 9.97V6z",car:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z",airplane:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z",dining:"M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z",pointer:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",mountain:"M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z",cloud:"M19.36 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96z",cloud2:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.61 5.64 5.36 8.04 2.35 8.36 0 10.9 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4h2c0-2.76-1.86-5.08-4.4-5.78C8.61 6.88 10.2 6 12 6c3.03 0 5.5 2.47 5.5 5.5v.5H19c1.65 0 3 1.35 3 3s-1.35 3-3 3z",sun:"M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z",dot:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z",flash:"M7 2v11h3v9l7-12h-4l4-8z",flag:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z",heart:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",star:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",home:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z",warning:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z",square:"M6 6h12v12H6z",directionArrow:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z",buildings:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z",dollar:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z",happy:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z",device:"M17 16l-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z",iphone:"M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z",train:"M12 2c-4.42 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h12v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4zM7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm3.5-6H6V6h5v5zm5.5 6c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm1.5-6h-5V6h5v5z",truck:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z,",gym:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z",cake:"M12 6c1.11 0 2-.9 2-2 0-.38-.1-.73-.29-1.03L12 0l-1.71 2.97c-.19.3-.29.65-.29 1.03 0 1.1.9 2 2 2zm4.6 9.99l-1.07-1.07-1.08 1.07c-1.3 1.3-3.58 1.31-4.89 0l-1.07-1.07-1.09 1.07C6.75 16.64 5.88 17 4.96 17c-.73 0-1.4-.23-1.96-.61V21c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-4.61c-.56.38-1.23.61-1.96.61-.92 0-1.79-.36-2.44-1.01zM18 9h-5V7h-2v2H6c-1.66 0-3 1.34-3 3v1.54c0 1.08.88 1.96 1.96 1.96.52 0 1.02-.2 1.38-.57l2.14-2.13 2.13 2.13c.74.74 2.03.74 2.77 0l2.14-2.13 2.13 2.13c.37.37.86.57 1.38.57 1.08 0 1.96-.88 1.96-1.96V12C21 10.34 19.66 9 18 9z",city:"M15 11V5l-3-3-3 3v2H3v14h18V11h-6zm-8 8H5v-2h2v2zm0-4H5v-2h2v2zm0-4H5V9h2v2zm6 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V9h2v2zm0-4h-2V5h2v2zm6 12h-2v-2h2v2zm0-4h-2v-2h2v2z",hot:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"}},F=(r=d.View,e(s,r),s.prototype.applyCircles=function(){var a=this,s=this.circlescollection;this.cleanCircles(),this.circlesPath=[],_.each(this.circlescollection.models,function(t,r){var e=parseFloat(t.get(a.api.getProperty("Circles.Latitude"))),i=parseFloat(t.get(a.api.getProperty("Circles.Longitude")));e&&i&&(a.circlesPath[r]=new google.maps.Circle({strokeColor:t.get(a.api.getProperty("Circles.StrokeColor")),strokeOpacity:t.get(a.api.getProperty("Circles.StrokeOpacity")),strokeWeight:t.get(a.api.getProperty("Circles.StrokeWeight")),fillColor:t.get(a.api.getProperty("Circles.FillColor")),fillOpacity:t.get(a.api.getProperty("Circles.FillOpacity")),map:a.map,center:{lat:e,lng:i},radius:parseFloat(t.get(a.api.getProperty("Circles.Radius")))}),a.circlesPath[r].id=t.id,a.circlesPath[r].infoWindowIndex=r,a.api.getProperty("Circles.ShowTooltip"))&&(a.handles[a.handles.length]=google.maps.event.addListener(a.circlesPath[r],"mouseover",function(e){var i,t=a.circlesPath[r].id,o=s.get(t);_.each(Object.keys(e),function(t){void 0!==e[t]&&void 0!==e[t].clientX&&(i=t,a.tooltip=a.api.setTooltip({data:o.attributes,text:a.api.getProperty("Circles.Tooltip"),anchorEl:a.el,position:{left:e[i].offsetX,top:e[i].offsetY-20}}))})}),a.handles[a.handles.length]=google.maps.event.addListener(a.circlesPath[r],"mouseout",function(){a.tooltip&&(a.api.removeTooltip(),delete a.tooltip)}))})},s.prototype.columSpecToColumnData=function(t,e){var i=[];this.circlesModel=e,_.each(t.models,function(t){i.push(t.get("id"))}),this.api.setProperty("possibleCircle",i)},s.prototype.cleanCircles=function(){_.each(this.handles,function(t){google.maps.event.removeListener(t)}),_.each(this.circlesPath,function(t){t.setMap(null)}),this.circlesPath=null},s.prototype.removeCircles=function(){this.cleanCircles()},s);function s(t){var e=r.call(this,t)||this;return e.options=t,e.$el=e.options.el,e.map=e.options.map,e.api=e.options.api,e.circlescollection=e.options.collection,e.circlesPath={},e.handles={},e}u=d.View,e(y,u),y.prototype.applyHeatmap=function(){var o=this,r=(this.cleanHeatmap(),[]);this.api.getProperty("Heatmap.Show")&&(_.each(this.heatmapcollection.models,function(t){var e=parseFloat(t.get(o.api.getProperty("Heatmap.Latitude"))),i=parseFloat(t.get(o.api.getProperty("Heatmap.Longitude"))),t=parseFloat(t.get(o.api.getProperty("Heatmap.Weight")));e&&i&&r.push({location:new google.maps.LatLng(e,i),weight:void 0===t?0:t})}),0<r.length)&&_.defer(function(){o.heatmap=new google.maps.visualization.HeatmapLayer({data:r}),o.heatmap.setMap(o.map),o.heatmapOpacity(o.api.getProperty("Heatmap.Opacity")),o.heatmapRadius(o.api.getProperty("Heatmap.Radius")),o.heatmaps.push(o.heatmap),o.getGradient(o.api.getProperty("Heatmap.Gradient"))})},y.prototype.cleanHeatmap=function(){if(this.heatmaps)for(var t=0;t<this.heatmaps.length;t++)this.heatmaps[t].setMap(null);this.heatmaps=[]},y.prototype.getGradient=function(t){"blue-red"===t?this.heatmap.set("gradient",["rgba(0, 255, 255, 0)","rgba(0, 255, 255, 1)","rgba(0, 191, 255, 1)","rgba(0, 127, 255, 1)","rgba(0, 63, 255, 1)","rgba(0, 0, 255, 1)","rgba(0, 0, 223, 1)","rgba(0, 0, 191, 1)","rgba(0, 0, 159, 1)","rgba(0, 0, 127, 1)","rgba(63, 0, 91, 1)","rgba(127, 0, 63, 1)","rgba(191, 0, 31, 1)","rgba(255, 0, 0, 1)"]):"red-blue"===t?this.heatmap.set("gradient",["rgba(255, 0, 0, 0)","rgba(191, 0, 31, 1)","rgba(127, 0, 63, 1)","rgba(63, 0, 91, 1)","rgba(0, 0, 127, 1)","rgba(0, 0, 159, 1)","rgba(0, 0, 191, 1)","rgba(0, 0, 223, 1)","rgba(0, 0, 255, 1)","rgba(0, 63, 255, 1)","rgba(0, 127, 255, 1)","rgba(0, 191, 255, 1)","rgba(0, 255, 255, 1)","rgba(0, 255, 255, 1)"]):this.heatmap.set("gradient",null)},y.prototype.heatmapRadius=function(t){this.heatmap.set("radius",t)},y.prototype.heatmapOpacity=function(t){this.heatmap.set("opacity",t/100)},y.prototype.columSpecToColumnData=function(t){var e=[];_.each(t.models,function(t){9===t.get("kdbType")&&e.push(t.get("id"))}),_.isEqual(e,this.api.getProperty("possibleHFloats"))||this.api.setProperty("possibleHFloats",e),this.applyHeatmap()},y.prototype.removeHeatmap=function(){this.cleanHeatmap()};var u,K=y;function y(t){var e=u.call(this,t)||this;return e.options=t,e.api=e.options.api,e.$el=e.options.el,e.map=e.options.map,e.heatmapcollection=e.options.collection,e.heatmaps=[],e}g=d.View,e(v,g),v.prototype.applyLine=function(){var e=this,s=this.api,i=s.getProperty("Lines.GroupBy"),t=(this.cleanLines(),i?this.linecollection.groupBy(function(t){return t.get(i)}):[this.collection.models]),n=[];_.each(t,function(t){var o,r=[],a="";_.each(t,function(t){var e=parseFloat(t.get(s.getProperty("Lines.Latitude"))),i=parseFloat(t.get(s.getProperty("Lines.Longitude")));a=t.get(s.getProperty("Lines.DBColor")),e&&i&&(r.push(e={lat:e,lng:i}),n.push(e)),o=t.attributes}),e.initLine(r,a,o)}),s.getProperty("Lines.ShowInView")&&this.lineInView(n)},v.prototype.initLine=function(t,e,i){var s=this,n=this.api,l=this.linePath.length,o=n.getProperty("Lines.DBColor");""===n.getProperty("Lines.GroupBy")&&this.cleanLines(),t&&(this.linePath.push(new google.maps.Polyline({path:t,geodesic:n.getProperty("Lines.Geodesic"),strokeColor:o?e:n.getProperty("Lines.Color"),lastData:i})),this.label&&this.label.setMap(null),this.labelMarker&&this.labelMarker.setMap(null),this.linePath[l].setMap(this.map),n.getProperty("Lines.ShowTooltip"))&&(this.handles[this.handles.length]=google.maps.event.addListener(this.linePath[l],"mouseover",function(i){var o,r,a={color:s.linePath[l].strokeColor,lastData:s.linePath[l].lastData,id:s.linePath[l].lineId};_.each(Object.keys(i),function(t){var e;void 0!==i[t]&&void 0!==i[t].clientX&&(e=h.compile(n.getProperty("Lines.LabelText")),r=t,o=e(a),s.tooltip=n.setTooltip({text:o,anchorEl:s.el,position:{left:i[r].offsetX,top:i[r].offsetY-20}}))})}),this.handles[this.handles.length]=google.maps.event.addListener(this.linePath[l],"mouseout",function(){s.tooltip&&(n.removeTooltip(),delete s.tooltip)}))},v.prototype.cleanLines=function(){_.each(this.handles,function(t){google.maps.event.removeListener(t)}),_.each(this.linePath,function(t){t.setMap(null)})},v.prototype.lineInView=function(t){for(var e=new google.maps.LatLngBounds,i=0;i<t.length;i++)e.extend(t[i]);this.map.fitBounds(e)},v.prototype.columSpecToColumnData=function(t){var e=[],i=[];_.each(t.models,function(t){9!==t.get("kdbType")&&8!==t.get("kdbType")||e.push(t.get("id")),i.push(t.get("id"))}),_.isEqual(e,this.api.getProperty("possibleLFloats"))||this.api.setProperty("possibleLFloats",e),_.isEqual(i,this.api.getProperty("possibleLAll"))||this.api.setProperty("possibleLAll",[""].concat(i)),this.applyLine()},v.prototype.getMidPoint=function(t){var e,i,o;return e=0<t.length?t.length%2==0?(i=t[t.length/2],o=t[t.length/2-1],{lat:(i.lat+o.lat)/2,lng:(i.lng+o.lng)/2}):t[t.length/2]:e},v.prototype.removeLine=function(){this.cleanLines()};var g,m,f,b,j,W,X,Y=v;function v(t){var e=g.call(this,t)||this;return e.options=t,e.api=e.options.api,e.$el=e.options.el,e.map=e.options.map,e.linecollection=e.options.collection,e.linePath=[],e.handles={},e}function w(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function J(t){return t="string"!=typeof t?String(t):t}function S(e){this.map={},e instanceof S?e.forEach(function(t,e){this.append(e,t)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function P(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function U(i){return new Promise(function(t,e){i.onload=function(){t(i.result)},i.onerror=function(){e(i.error)}})}function Z(t){var e=new FileReader;return e.readAsArrayBuffer(t),U(e)}function q(){return this.bodyUsed=!1,this._initBody=function(t,e){if("string"==typeof(this._bodyInit=t))this._bodyText=t;else if(f&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(b&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!j||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},f?(this.blob=function(){var t=P(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(Z)},this.text=function(){var t,e,i,o=P(this);if(o)return o;if(this._bodyBlob)return o=this._bodyBlob,t=this._options,e=new FileReader,t=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,t=o.type.match(i)||t.match(i),i=[o],t&&i.push(t[0].replace(/^charset\=/,"").replace(/;$/,"")),e.readAsText.apply(e,i),U(e);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=P(this);return t||Promise.resolve(this._bodyText)},b&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}function A(t,e){var i,o=(e=e||{}).body;if(A.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new S(t.headers)),this.method=t.method,this.mode=t.mode,o||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new S(e.headers)),this.method=(t=e.method||this.method||"GET",i=t.toUpperCase(),-1<W.indexOf(i)?i:t),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o,e)}function Q(t){var i=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(e=(t=t.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),i.append(decodeURIComponent(e),decodeURIComponent(t)))}),i}function C(t,e){this._initBody(t,e=e||{}),this.type="default",this.status=e.status,this.ok=200<=this.status&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof S?e.headers:new S(e.headers),this.url=e.url||""}!(m="undefined"!=typeof self?self:this).__disableNativeFetch&&m.fetch||(S.prototype.append=function(t,e){t=w(t),e=J(e);var i=this.map[t];i||(this.map[t]=i=[]),i.push(e)},S.prototype.delete=function(t){delete this.map[w(t)]},S.prototype.get=function(t){t=this.map[w(t)];return t?t[0]:null},S.prototype.getAll=function(t){return this.map[w(t)]||[]},S.prototype.has=function(t){return this.map.hasOwnProperty(w(t))},S.prototype.set=function(t,e){this.map[w(t)]=[J(e)]},S.prototype.forEach=function(i,o){Object.getOwnPropertyNames(this.map).forEach(function(e){this.map[e].forEach(function(t){i.call(o,t,e,this)},this)},this)},f="FileReader"in m&&"Blob"in m&&function(){try{return new Blob,!0}catch(t){return!1}}(),b="FormData"in m,j="ArrayBuffer"in m,W=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],A.prototype.clone=function(){return new A(this)},q.call(A.prototype),q.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},C.error=function(){var t=new C(null,{status:0,statusText:""});return t.type="error",t},X=[301,302,303,307,308],C.redirect=function(t,e){if(-1===X.indexOf(e))throw new RangeError("Invalid status code");return new C(null,{status:e,headers:{location:t}})},m.Headers=S,m.Request=A,m.Response=C,m.fetch=function(i,n){return new Promise(function(o,r){var t=A.prototype.isPrototypeOf(i)&&!n?i:new A(i,n),a=new XMLHttpRequest;var s=!1;function e(){var t,i,e;if(4===a.readyState)return(t=1223===a.status?204:a.status)<100||599<t?s?void 0:(s=!0,void r(new TypeError("Network request failed"))):(t={status:t,statusText:a.statusText,headers:(t=a,i=new S,t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var t=t.trim().split(":"),e=t.shift().trim(),t=t.join(":").trim();i.append(e,t)}),i),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},e="response"in a?a.response:a.responseText,void(s||(s=!0,o(new C(e,t)))))}a.onreadystatechange=e,a.onload=e,a.onerror=function(){s||(s=!0,r(new TypeError("Network request failed")))},a.open(t.method,t.url,!0);try{"include"===t.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in a&&f&&(a.responseType="blob"),t.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===t._bodyInit?null:t._bodyInit)})},m.fetch.polyfill=!0,"undefined"!=typeof module&&module.exports&&(module.exports=m.fetch));L=d.View,e(O,L),O.prototype.applyGeoJsonData=function(t){var e,i,o=this,r=this.api.getProperty("OverLay"),a=r.layerProperties.GeoColumn,s=(void 0===t.objects&&(i=e=t),Object.keys(i.features[0].properties));_.defer(function(){o.api.setProperty("possibleGKeys",s)}),_.isEqual(this.geoJsonObject,i)||(this.overlay.setMap(null),this.geoJsonObject=i,this.overlayData=e),void 0!==a&&""!==a&&this.map.data.loadGeoJson(r.layerProperties.DataGeo,{idPropertyName:a})},O.prototype.getGeoJSON=function(){var e=this,o=this.api.getProperty("OverLay.layerProperties.GeoColumn"),t=this.api.getProperty("OverLay.layerProperties.DataGeo");t.indexOf("http")<0||fetch(t).then(function(t){return t.json()}).then(function(t){var i=[];t&&t.features&&t.features[0].properties&&_.each(t.features[0].properties,function(t,e){i.push(e)}),e.api.setProperty("overlayGeoJSONKeys",i),_.indexOf(i,o)<0&&e.api.setProperty("OverLay.layerProperties.GeoColumn",i[0]),e.applyGeoJsonData(t),e.overLaySetStyle(),e.overLayMouseEvents()}).catch(function(t){throw t})},O.prototype.applyOverlay=function(){var o=this,t=this.$el.height(),e=this.api.getProperty("OverLay.ShowOverlay");""!==this.options.overlaySrc&&(this.overlay.onAdd=function(){o.layer=n.select(o.layer.getPanes().overlayLayer).append("svg").attr("class","over").attr("height",_.isNil(t)?0:t)},this.overlay.draw=function(t){var e,i=o.api.getProperty("OverLay.layerProperties.GeoColumn");"updateLayer"!==t&&void 0!==o.data&&!_.isEqual(o.data,{})||(void 0!==i?o.dataModel&&(o.geoJsonObject?o.overLaySetStyle():(o.data={},o.getGeoJSON())):o.api.getProperty("OverLay.layerProperties")&&(t={north:o.api.getProperty("OverLay.layerProperties.ImageNorth"),south:o.api.getProperty("OverLay.layerProperties.ImageSouth"),east:o.api.getProperty("OverLay.layerProperties.ImageEast"),west:o.api.getProperty("OverLay.layerProperties.ImageWest")},i={opacity:o.api.getProperty("OverLay.layerProperties.ImageOpacity")/100},o.historicalOverlay&&o.historicalOverlay.setMap(null),e=o.api.getProperty("OverLay.layerProperties.ImageSrc"),o.historicalOverlay=new google.maps.GroundOverlay(e,t,i),o.historicalOverlay.setMap(o.map)))},this.overlay.onRemove=function(){},e&&this.loadgeoJson?(this.overlay.setMap(null),this.overlay.setMap(this.map),this.loadgeoJson=!1):e||this.overlay.setMap(null)),this.showLegend()},O.prototype.columSpecToColumnData=function(t,e){var i=this.api.getProperty("OverLay"),i=_.extend({},i),o=[],r=[],a=[],s=[],n=[];this.dataModel=e,_.each(t.models,function(t){6===t.get("kdbType")&&r.push(t.get("id")),5<=t.get("kdbType")&&t.get("kdbType")<=9&&o.push(t.get("id")),11===t.get("kdbType")&&a.push(t.get("id")),n.push(t.get("id")),s.push(t.get("id"))}),_.isEqual(r,this.api.getProperty("possibleDKeys"))&&_.isEqual(a,this.api.getProperty("possibleDString"))&&_.isEqual(o,this.api.getProperty("possibleDValues"))||(i.DataKey=_.includes(s,i.DataKey)?i.DataKey:s[0],i.DataValue=_.includes(o,i.DataValue)?i.DataValue:o[0],i.DataDesc=_.includes(a,i.DataKey)?i.DataKey:a[0],this.api.setProperty("possibleDKeys",r),this.api.setProperty("possibleDString",a),this.api.setProperty("possibleImageString",_.union(["none"],a)),this.api.setProperty("possibleDValues",o),this.api.setProperty("possibleColors",a),this.api.setProperty("all",n),this.api.setProperty("overlayall",s)),this.applyOverlay()},O.prototype.getColourScale=function(){return["rgb(219,79,53)","rgb(219,103,48)","rgb(219,126,42)","rgb(216,152,38)","rgb(212,176,34)","rgb(202,192,31)","rgb(182,194,30)","rgb(154,197,27)","rgb(128,195,26)","rgb(102,191,25)","rgb(75,187,23)","rgb(53,181,28)","rgb(29,173,33)","rgb(17,170,42)","rgb(16,167,57)","rgb(15,161,79)"]},O.prototype.getIndexBy=function(t,e){for(var i=0;i<t.length;i++)if(t[i].toString()===e.toString())return i;return-1},O.prototype.overLayMouseEvents=function(){function s(){l.tooltip&&(l.api.removeTooltip(),delete l.tooltip)}var n,l=this,p=this.api.getProperty("OverLay.layerProperties.GeoColumn"),h=this.api.getProperty("OverLay.layerProperties.DataKey"),d=this.api.getProperty("OverLay.layerProperties.DataValue"),c=this.api.getProperty("OverLay.TooltipData");this.handles[this.handles.length]=this.map.data.addListener("mouseout",s.bind(this)),this.handles[this.handles.length]=this.map.data.addListener("mouseover",function(t){l.lastOverId=t.feature.getId();for(var e=Object.keys(t),i=200,o=200,r="",a=0;a<e.length;a++)MouseEvent.prototype.isPrototypeOf(t[e[a]])&&(i=t[e[a]].offsetX,o=t[e[a]].offsetY);n=t.feature,_.each(l.datacollection.models,function(t){var e=n.getId()?n.getId():n.getProperty(p);t.get(h).toString()===e.toString()&&(r=t.attributes,l.overLayMouseEventsHeatmap(parseFloat(t.get(d))))}),l.tooltip=l.api.setTooltip({data:r,text:c,anchorEl:l.el,position:{left:i,top:o}}),"<div></div>"===l.tooltip.$el.html()&&s()}),this.handles[this.handles.length]=this.map.data.addListener("click",function(t){var i,e=t.feature.getProperty(p),o=(l.api.setProperty("OverLay.layerProperties.Selected",e),l.api.getProperty("OverLay.layerProperties.SelectedBounds")&&(o=void 0,"MultiPolygon"===t.feature.getGeometry().getType()?o=t.feature.getGeometry().getArray()[0].getArray()[0].getArray():"Polygon"===t.feature.getGeometry().getType()&&(o=t.feature.getGeometry().getArray()[0].getArray()),o)&&(t=(t=l.zoomLevelCalc(o)[1].toString().replace(/\(/g," ")).replace(/\)/g," "),l.api.setProperty("OverLay.layerProperties.SelectedBounds",t)),l.api.getProperty("OverLay.SelectedObjectRouting")),t=l.datacollection.pluck(h);void 0!==e&&(i=l.getIndexBy(t,e),void 0!==o)&&_.each(o,function(t,e){0<=i&&l.datacollection.models[i]&&l.onRouteViewStateRouting("OverLay.SelectedObjectRouting",e,l.datacollection.models[i].get(t.ColumnProperty))})})},O.prototype.overLayMouseEventsHeatmap=function(t){this.max&&this.min&&this.max!==1/0&&this.min!==1/0&&this.max-this.min!=0&&(t=(t-this.min)/(this.max-this.min),this.$el.find(".data-caret")[0].style.display="block",this.$el.find(".data-caret")[0].style.paddingLeft=280*t+"px")},O.prototype.overLaySetStyle=function(){var o,r=this,a="#ead6df",s=this.getColourScale(),n=void 0===this.api.getProperty("OverLay.layerProperties.LayerOpacity")?.3:this.api.getProperty("OverLay.layerProperties.LayerOpacity")/100,t=this.api.getProperty("OverLay.layerProperties.DataValue"),e=this.api.getProperty("OverLay.layerProperties.DataKey"),l=this.api.getProperty("OverLay.layerProperties.GeoColumn"),p=this.datacollection.pluck(e),h=this.datacollection.pluck(t);this.showLegend(),this.map.data.setStyle(function(t){var e,i,t=t.getProperty(l);return void 0!==t&&(o=r.getIndexBy(p,t),t=_.min(h.map(Number)),e=_.max(h.map(Number)),t=_.isNil(t)?0:parseFloat(t),e=_.isNil(e)?1:parseFloat(e),i=r.datacollection.models[o],a=o<0||(t===1/0||e===1/0)||_.isNil(i)?"#ead6df":(i=parseInt(h[o],10),i=Math.round(Math.min(16*(i-t)/(e-t),15)),s[i]),r.max=e,r.min=t),{fillColor:a,strokeColor:"#ffffff",strokeWeight:1,fillOpacity:n,opacity:1}})},O.prototype.onRouteViewStateRouting=function(t,e,i){this.api.setProperty(t+"."+e+".ViewstateProperty",i)},O.prototype.removeOverlay=function(){_.each(this.handles,function(t){google.maps.event.removeListener(t)}),this.overlay&&this.overlay.setMap(null)},O.prototype.showLegend=function(){var t=this.$el.find(".nicebox")[0],e=this.api.getProperty("OverLay.layerProperties.ShowLegend")&&this.api.getProperty("OverLay.layerProperties").Data;t.style.display=e?"block":"none"},O.prototype.latRad=function(t){t=Math.sin(t*Math.PI/180),t=Math.log((1+t)/(1-t))/2;return Math.max(Math.min(t,Math.PI),-Math.PI)/2},O.prototype.zoom=function(t,e,i){return Math.floor(Math.log(t/e/i)/Math.LN2)},O.prototype.zoomLevelCalc=function(t){var e=256,i=256,o={height:this.$el.height(),width:this.$el.width()},r=new google.maps.LatLngBounds,t=(_.each(t,function(t){r.extend(new google.maps.LatLng(t.lat(),t.lng()))}),r.getNorthEast()),a=r.getSouthWest(),s=(this.latRad(t.lat())-this.latRad(a.lat()))/Math.PI,t=t.lng()-a.lng(),a=(t<0?360+t:t)/360,t=this.zoom(o.height,e,s),e=this.zoom(o.width,i,a);return[Math.min(t,e,21),r]};var L,tt=O;function O(t){var e=L.call(this,t)||this;return e.loadgeoJson=!0,e.options=t,e.api=e.options.api,e.layer=e.options.layer,e.dataModel=e.options.dataModel,e.$el=e.options.el,e.map=e.options.map,e.websiteUrl=e.options.websiteUrl,e.datacollection=e.options.datacollection,e.overlay=new google.maps.OverlayView,e.loadgeoJson=!0,e.handles={},e}function k(t,e,i){this.extend(k,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var i=i||{},o=(this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.imageClusters_={m1:"data:image/png;base64,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",m2:"data:image/png;base64,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",m3:"data:image/png;base64,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",m4:"data:image/png;base64,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",m5:"data:image/png;base64,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"},this.zoomOnClick_=!0,null!=i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,null!=i.averageCenter&&(this.averageCenter_=i.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom(),this);google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=o.map_.getZoom();o.prevZoom_!=t&&(o.prevZoom_=t,o.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){o.redraw()}),e&&e.length&&this.addMarkers(e,!1)}function T(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new x(this,t.getStyles(),t.getGridSize())}function x(t,e,i){t.getMarkerClusterer().extend(x,google.maps.OverlayView),this.styles_=e,this.padding_=i||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}k.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},k.prototype.onAdd=function(){this.setReady_(!0)},k.prototype.draw=function(){},k.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imageClusters_["m"+Math.min(e+1,5)],height:t,width:t})},k.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),i=new google.maps.LatLngBounds,o=0;t=e[o];o++)i.extend(t.getPosition());this.map_.fitBounds(i)},k.prototype.setStyles=function(t){this.styles_=t},k.prototype.getStyles=function(){return this.styles_},k.prototype.isZoomOnClick=function(){return this.zoomOnClick_},k.prototype.isAverageCenter=function(){return this.averageCenter_},k.prototype.getMarkers=function(){return this.markers_},k.prototype.getTotalMarkers=function(){return this.markers_.length},k.prototype.setMaxZoom=function(t){this.maxZoom_=t},k.prototype.getMaxZoom=function(){return this.maxZoom_},k.prototype.calculator_=function(t,e){for(var i=0,t=t.length,o=t;0!==o;)o=parseInt(o/10,10),i++;return{text:t,index:i=Math.min(i,e)}},k.prototype.setCalculator=function(t){this.calculator_=t},k.prototype.getCalculator=function(){return this.calculator_},k.prototype.addMarkers=function(t,e){for(var i,o=0;i=t[o];o++)this.pushMarkerTo_(i);e||this.redraw()},k.prototype.pushMarkerTo_=function(t){var e;t.isAdded=!1,t.draggable&&(e=this,google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})),this.markers_.push(t)},k.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},k.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var i,o=0;i=this.markers_[o];o++)if(i==t){e=o;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},k.prototype.removeMarker=function(t,e){t=this.removeMarker_(t);return!(e||!t||(this.resetViewport(),this.redraw(),0))},k.prototype.removeMarkers=function(t,e){for(var i=!1,o=0;r=t[o];o++)var r=this.removeMarker_(r),i=i||r;if(!e&&i)return this.resetViewport(),this.redraw(),!0},k.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},k.prototype.getTotalClusters=function(){return this.clusters_.length},k.prototype.getMap=function(){return this.map_},k.prototype.setMap=function(t){this.map_=t},k.prototype.getGridSize=function(){return this.gridSize_},k.prototype.setGridSize=function(t){this.gridSize_=t},k.prototype.getMinClusterSize=function(){return this.minClusterSize_},k.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},k.prototype.getExtendedBounds=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),o=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),i=e.fromLatLngToDivPixel(i),o=(i.x+=this.gridSize_,i.y-=this.gridSize_,e.fromLatLngToDivPixel(o)),i=(o.x-=this.gridSize_,o.y+=this.gridSize_,e.fromDivPixelToLatLng(i)),e=e.fromDivPixelToLatLng(o);return t.extend(i),t.extend(e),t},k.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},k.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},k.prototype.resetViewport=function(t){for(var e,i=0;e=this.clusters_[i];i++)e.remove();for(var o,i=0;o=this.markers_[i];i++)o.isAdded=!1,t&&o.setMap(null);this.clusters_=[]},k.prototype.repaint=function(){var i=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,e=0;t=i[e];e++)t.remove()},0)},k.prototype.redraw=function(){this.createClusters_()},k.prototype.distanceBetweenPoints_=function(t,e){var i,o;return t&&e?(o=(e.lat()-t.lat())*Math.PI/180,i=(e.lng()-t.lng())*Math.PI/180,o=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))):0},k.prototype.addToClosestCluster_=function(t){for(var e,i=4e4,o=null,r=(t.getPosition(),0);e=this.clusters_[r];r++){var a=e.getCenter();a&&(a=this.distanceBetweenPoints_(a,t.getPosition()))<i&&(i=a,o=e)}o&&o.isMarkerInClusterBounds(t)?o.addMarker(t):((e=new T(this)).addMarker(t),this.clusters_.push(e))},k.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),i=this.getExtendedBounds(e),o=0;t=this.markers_[o];o++)!t.isAdded&&this.isMarkerInBounds_(t,i)&&this.addToClosestCluster_(t)},T.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,i=0;e=this.markers_[i];i++)if(e==t)return!0;return!1},T.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;this.center_?this.averageCenter_&&(i=this.markers_.length+1,e=(this.center_.lat()*(i-1)+t.getPosition().lat())/i,i=(this.center_.lng()*(i-1)+t.getPosition().lng())/i,this.center_=new google.maps.LatLng(e,i),this.calculateBounds_()):(this.center_=t.getPosition(),this.calculateBounds_()),t.isAdded=!0,this.markers_.push(t);var e,i,o=this.markers_.length;if(o<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),o==this.minClusterSize_)for(var r=0;r<o;r++)this.markers_[r].setMap(null);return o>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},T.prototype.getMarkerClusterer=function(){return this.markerClusterer_},T.prototype.getBounds=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_),e=this.getMarkers();if(void 0!==e)for(var i,o=0;i=e[o];o++)t.extend(i.getPosition());return t},T.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},T.prototype.getSize=function(){return this.markers_.length},T.prototype.getMarkers=function(){return this.markers_},T.prototype.getCenter=function(){return this.center_},T.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},T.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},T.prototype.getMap=function(){return this.map_},T.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&e<t)for(var i,o=0;i=this.markers_[o];o++)i.setMap(this.map_);else this.markers_.length<this.minClusterSize_?this.clusterIcon_.hide():(e=this.markerClusterer_.getStyles().length,t=this.markerClusterer_.getCalculator()(this.markers_,e),this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(t),this.clusterIcon_.show())},x.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_)},x.prototype.triggerClusterOver=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterOver",this.cluster_)},x.prototype.triggerClusterOut=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterOut",this.cluster_)},x.prototype.onAdd=function(){var t;this.div_=document.createElement("DIV"),this.visible_&&(t=this.getPosFromLatLng_(this.center_),this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text);this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this;google.maps.event.addDomListener(this.div_,"click",function(){e.triggerClusterClick()}),google.maps.event.addDomListener(this.div_,"mouseover",function(){e.triggerClusterOver()}),google.maps.event.addDomListener(this.div_,"mouseout",function(){e.triggerClusterOut()})},x.prototype.getPosFromLatLng_=function(t){t=this.getProjection().fromLatLngToDivPixel(t);return t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10),t},x.prototype.draw=function(){var t;this.visible_&&(t=this.getPosFromLatLng_(this.center_),this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px")},x.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},x.prototype.show=function(){var t;this.div_&&(t=this.getPosFromLatLng_(this.center_),this.div_.style.cssText=this.createCss(t),this.div_.style.display=""),this.visible_=!0},x.prototype.remove=function(){this.setMap(null)},x.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},x.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},x.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1),t=Math.min(this.styles_.length-1,t),t=this.styles_[t];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition},x.prototype.setCenter=function(t){this.center_=t},x.prototype.createCss=function(t){var e=[],i=(e.push("background-image:url("+this.url_+");"),this.backgroundPosition_||"0 0"),i=(e.push("background-position:"+i+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&0<this.anchor_[0]&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&0<this.anchor_[1]&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;"),this.textColor_||"black"),o=this.textSize_||11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+i+"; position:absolute; font-size:"+o+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},window.MarkerClusterer=k;D=d.View,e(M,D),M.prototype.addTrackedPoint=function(){var r,a=this,s=this.api.getProperty("Points.TrackedItem"),n=this.api.getProperty("Points.Shape"),l=this.api.getProperty("Points.Latitude"),p=this.api.getProperty("Points.Longitude");_.each(this.pointcollection.models,function(t,e){var i=void 0===t.get(s)?"":t.get(s).toString();if(0===e&&(r="default"===n?a.addNewMarker(t,t.id,i,t.get(l),t.get(p),null):(e=a.getMarkerImage(t),a.addNewMarker(t,t.id,i,t.get(l),t.get(p),e)))){a.map.setCenter(new google.maps.LatLng(t.get(l),t.get(p)));for(var o=0;o<a.markers.length;o++)a.markers[o].setMap(null);a.markers=[],a.markers.push(r)}})},M.prototype.getMarkerImage=function(t){var e=this.api.getProperty("Points.Shape"),i=this.api.getProperty("Points.Title"),o=this.api.getProperty("Points.ShapeColor"),r=this.api.getProperty("Points.ShapeDB"),a=this.api.getProperty("Points.ShapeColorDB"),s=this.api.getProperty("Points.ShapeSelectedColorOpacity"),n=this.api.getProperty("Points.ShapeCanRotation"),l=this.api.getProperty("Points.ShapeRotation"),p=this.api.getProperty("Points.ShapeSelectedColor"),e="use selected shape"===r?e:t.get(r),o="use selected color"===a?o:t.get(a),a=this.api.getProperty("Points.Selected"),h=0;return n&&(parseFloat(l)?h=parseFloat(l):parseFloat(t.get(l))&&(h=parseFloat(t.get(l)))),{path:void 0===c.SVG_MAP[e]?t.get(r):c.SVG_MAP[e],size:new google.maps.Size(1,1),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(.5,.5),scaledSize:new google.maps.Size(1,1),fillColor:t.get(i)===a?p:o,strokeOpacity:0,fillOpacity:s,rotation:h}},M.prototype.addNewMarker=function(e,t,i,o,r,a){var s={},n=this.api.getProperty("Points.Actions"),l=this.api.getProperty("Points.ShapeColorOpacity"),p=this.api.getProperty("Points.Selected"),h=this.api.getProperty("Points"),a=a?new google.maps.Marker({map:this.map,draggable:!1,title:i,icon:a,opacity:l/100,position:{lat:o,lng:r}}):new google.maps.Marker({map:this.map,draggable:!1,title:i,position:{lat:o,lng:r}});return a.id=t,a.setAnimation(null),_.each(n,function(t){s[t.TriggerColumn]=e.get(t.TriggerColumn)}),a.viewState=s,i===p&&this.centerOnPoint(h,a),a},M.prototype.addPointsDefault=function(t){var e=this.api.getProperty("Points.Latitude"),i=this.api.getProperty("Points.Longitude"),o=this.api.getProperty("Points.Title"),e=t.get(e),i=t.get(i);e&&i&&(t=this.addNewMarker(t,t.id,o,e,i,null),this.markers.push(t),this.addEvents(t))},M.prototype.addPointCustomShape=function(t){var e=this.api.getProperty("Points.Latitude"),i=this.api.getProperty("Points.Longitude"),o=this.getMarkerImage(t),e=t.get(e),i=t.get(i),t=this.addNewMarker(t,t.id,"",e,i,o);this.markers.push(t),this.addEvents(t)},M.prototype.addEvents=function(t){this.addMarkerMouseInEvt(t),this.addMarkerMouseOutEvt(t),this.addMarkerClickEvt(t)},M.prototype.addPoints=function(){var e=this,t=this.pointcollection.models,i=_.map(this.markers,"id"),t=_.filter(t,function(t){return i.indexOf(t.id)<0}),o=this.api.getProperty("Points.Tracker"),r=""===o&&this.api.getProperty("Points.Cluster"),a=this.api.getProperty("Points.Shape");0<t.length&&!r?""!==o?this.addTrackedPoint():_.each(t,function(t){"default"===a?e.addPointsDefault(t):e.addPointCustomShape(t)}):r&&this.addMarkerClusters()},M.prototype.addMarkerClusters=function(){var i,o,r,a,s=this,t=this.api.getProperty("Points.ClusterSize"),e=this.api.getProperty("Points.ClusterShape");this.markerCluster&&(this.markerCluster.clearMarkers(),i=this.api.getProperty("Points.Latitude"),o=this.api.getProperty("Points.Longitude"),r=this.api.getProperty("Points.Title"),a=this.api.getProperty("Points.Shape"),this.markers=_.map(this.pointcollection.models,function(t){var e="default"!==a?s.getMarkerImage(t):null,t=s.addNewMarker(t,t.id,r,t.get(i),t.get(o),e);return s.addEvents(t),t})),this.markerCluster=new k(this.map,this.markers),"default"!==t&&(this.markerCluster.gridSize_=parseInt(t,10)),"default"!==e&&_.each(this.markerCluster.styles_,function(t){t.url="Images/blue"+e+".png"}),this.addMarkerClusterClickEvt()},M.prototype.addMarkerMouseOutEvt=function(t){var e=this;this.handles[this.handles.length]=google.maps.event.addListener(t,"mouseout",function(){e.tooltip&&(e.api.removeTooltip(),delete e.tooltip)})},M.prototype.addMarkerClickEvt=function(a){var s=this,n=this.api.getProperty("Points.Actions");this.handles[this.handles.length]=google.maps.event.addListener(a,"click",function(){var t=s.api.getProperty("Points.Zoom"),e=s.api.getProperty("Points.Selected"),i=s.api.getProperty("Points"),o={},r=_.filter(s.collection.models,function(t){return t.id===a.id});_.each(r,function(e){_.each(n,function(t){o[t.TriggerColumn]=e.get(t.TriggerColumn)})}),a.viewState=o,t&&(s.map.setZoom(s.map.zoom+1),s.map.panTo(a.getPosition())),""!==e&&s.api.setProperty("Points.Selected",s.title),i.Center&&(r=a.getPosition(),s.map.setCenter(r)),s.centerOnPoint(i,s),s.doAction("Click",a.viewState)})},M.prototype.addMarkerClusterClickEvt=function(){var l=this,p=this.api.getProperty("Points.TooltipData");google.maps.event.addListener(this.markerCluster,"clusterclick",function(t){if(21<=l.map.zoom){for(;!_.isEqual(l.infoBubble.tabs_,[]);)l.infoBubble.removeTab(0);_.each(t.getMarkers(),function(e){var t="<div>",i=l.pointcollection.models[e.id],o=void 0===p?l.api.getProperty("all"):p,r=h.compile(o),a="",s=l.api.getProperty("Points.TrackedItem");if(_.each(l.pointcollection.models,function(t){t.get("_rowIndex")===e.id&&(a=t.attributes)}),""!==a){var n={pointTitle:e.title,pointColor:_.get(e,"icon.fillColor")?_.get(e,"icon.fillColor"):"red",pointIcon:_.get(e,"icon.path")?_.get(e,"icon.path"):"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",pointLatitude:e.position.lat(),pointLongitude:e.position.lng(),pointID:e.id},n=_.extend({},a,n),o=l.api.getTemplateViewStates(o);try{t='<div style="color:#000000">'+r(_.assignIn(n,o))+"</div>"}catch(t){}}t+="</div>",l.infoBubble.addTab(i.get(s),t)}),l.infoBubble.open(l.map,t.getMarkers()[0]),l.infoBubble.setPosition(t.getCenter()),l.infoBubble.clickEvent(),google.maps.event.addListener(l.infoBubble,"closeclick",function(){if(l.infoBubble.tabs_&&1<l.infoBubble.tabs_.length)for(var t=0;t<=l.infoBubble.tabs_.length;t+=1)l.infoBubble.removeTab(0)})}else l.markerCluster.maxZoom_=1,l.map.setCenter(t.getCenter()),l.map.fitBounds(t.getBounds())})},M.prototype.addMarkerMouseInEvt=function(a){var s=this,n=this.api.getProperty("Points.ShowTooltip"),l=this.api.getProperty("Points.TooltipData"),p=this.pointcollection.models;this.handles[this.handles.length]=google.maps.event.addListener(a,"mouseover",function(t){var e=_.filter(p,function(t){return t.id===a.id});if(a.setOptions({opacity:1}),n){if(s.infoBubble||(s.infoBubble=s.options.app.infoBubble),s.infoBubble){if(s.infoBubble.tabs_&&1<s.infoBubble.tabs_.length)for(var i=0;i<=s.infoBubble.tabs_.length;i+=1)s.infoBubble.removeTab(0);var o=void 0===l?"":l,r=[];""!==o&&0<e.length&&(e=e[0],o=s.tooltipsConvert(o,e.attributes),r.push(e.attributes),e={pointTitle:a.title,pointColor:_.get(a,"icon.fillColor")?_.get(a,"icon.fillColor"):"red",pointIcon:_.get(a,"icon.path")?_.get(a,"icon.path"):"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",pointLatitude:a.position.lat(),pointLongitude:a.position.lng(),pointID:a.id},t=s.app.getCanvasXY(t.latLng),s.tooltip=s.api.setTooltip({data:_.extend({},r[0],e),text:o,anchorEl:s.el,position:{left:t.x,top:t.y}}))}s.doAction("Hover",a.viewState)}})},M.prototype.updatePoints=function(){var o=this,e=_.map(this.markers,"id"),t=_.filter(this.pointcollection.models,function(t){return 0<=e.indexOf(t.id)}),r=this.api.getProperty("Points.Latitude"),a=this.api.getProperty("Points.Longitude"),s=this.api.getProperty("Points.Title"),n=this.api.getProperty("Points.Selected"),l="default"!==this.api.getProperty("Points.Shape"),p=this.api.getProperty("Points.Cluster"),h=this.api.getProperty("Points.Label"),d=this.api.getProperty("Points.LabelColor"),c=this.api.getProperty("Points.LabelSize");_.each(t,function(t){var e=t.get(r),i=t.get(a),e=new google.maps.LatLng(e,i);o.markers&&o.markers[t.id]&&(o.markers[t.id].setAnimation(null),o.markers[t.id].setPosition(e),"none"===h?o.markers[t.id].setLabel(null):o.markers[t.id].setLabel({text:""+t.get(h),color:d,fontSize:c+"px"}),l&&!p&&o.markers[t.id].setIcon(o.getMarkerImage(t)),t.get(s)===n)&&o.centerOnPoint(t,o.markers[t.id])}),p&&this.markerCluster&&this.markerCluster.repaint()},M.prototype.applyPoints=function(){this.cleanPoints(),this.addPoints(),this.updatePoints(),this.centerOnCollection(),this.infoBubble||(this.infoBubble=this.options.infoBubble)},M.prototype.doAction=function(e,o){var t=this.api.getProperty("Points.Actions"),r=[];_.each(t,function(i,t){i.Trigger===e&&("nav"===i._Type&&_.each(i.SelectDashboardScreen,function(t,e){i["SelectDashboardScreen."+e]=t}),r.push(_.extend({},i,{_PropertyIndex:t,Value:o[i.TriggerColumn]})))}),this.app.api.doActions(r,"Points.Actions")},M.prototype.hasDistinctMarkers=function(){for(var t,e,i=0,o=this.markers;i<o.length;i++){var r=o[i].getPosition(),a=r.lat(),r=r.lng();if(t&&e&&(1e-4<Math.abs(a-e[0])||1e-4<Math.abs(r-e[1])||1e-4<Math.abs(a-t[0])||1e-4<Math.abs(r-t[1])))return!0;e=t?(t=[Math.min(a,t[0]),Math.min(r,t[1])],[Math.max(a,e[0]),Math.max(r,e[1])]):(t=[a,r],[a,r])}return!1},M.prototype.centerOnCollection=function(){if(this.markers&&this.api.getProperty("Points.PointsInView")&&0!==this.markers.length){var t=new google.maps.LatLngBounds;if(this.hasDistinctMarkers()){for(var e=0;e<this.markers.length;e++)t.extend(this.markers[e].getPosition());this.map.fitBounds(t)}else{var i=this.markers[0].getPosition();this.map.setCenter({lat:i.lat(),lng:i.lng()}),this.map.setZoom(12),this.map.setCenter({lat:i.lat(),lng:i.lng()})}}},M.prototype.centerOnPoint=function(t,e){this.api.getProperty("Points.Center")&&(i=e.getPosition(),this.map.setCenter(i));var i=this.pointcollection.models[e.id];void 0!==e.icon&&i&&e.setIcon(this.getMarkerImage(i))},M.prototype.cleanPoints=function(){var e=_.map(this.pointcollection.models,"id"),t=this.api.getProperty("Points.Cluster");if(_.each(this.handles,function(t){google.maps.event.removeListener(t)}),!t){for(var i=0;i<this.markers.length;i++)e.indexOf(this.markers[i].id)<0&&(this.markers[i].setMap(null),console.log("removed",this.markers[i].id));this.markers=_.filter(this.markers,function(t){return 0<=e.indexOf(t.id)})}},M.prototype.columSpecToColumnData=function(o){var r,a=this,s=[],n=[],l=[],p=[],h=[],d=[];_.defer(function(){var t,e,i;r=_.extend({},a.api.getProperty("Points")),_.each(o.models,function(t){s.push(t.get("id")),9!==t.get("kdbType")&&8!==t.get("kdbType")||n.push(t.get("id")),11===t.get("kdbType")&&(l.push(t.get("id")),p.push(t.get("id")),h.push(t.get("id")))}),p=$.merge(["use selected shape"],void 0===p?[]:p),d=$.merge(["use Rotation"],void 0===d?[]:d),h=$.merge(["use selected color"],void 0===h?[]:h),_.isEqual(n,a.api.getProperty("possibleFloats"))&&_.isEqual(l,a.api.getProperty("possibleStrings"))&&_.isEqual(s,a.api.getProperty("possibleTrack"))&&_.isEqual(h,a.api.getProperty("possibleColors"))&&_.isEqual(p,a.api.getProperty("possibleShapes"))||0<s.length&&(t=r.Longitude,e=r.Latitude,i=r.TrackedItem,0<=_.indexOf(n,"Long")?t="Long":n[1]&&(t=n[1]),0<=_.indexOf(n,"Lat")?e="Lat":n[0]&&(e=n[0]),0<=_.indexOf(s,"idx")?i="idx":s[0]&&(i=s[0]),r.Longitude=""===r.Longitude||void 0===r.Longitude||_.indexOf(n,r.Longitude)<0?t:r.Longitude,r.Latitude=""===r.Latitude||void 0===r.Latitude||_.indexOf(n,r.Latitude)<0?e:r.Latitude,r.ShapeDB=0<=_.indexOf(p,r.ShapeDB)?r.ShapeDB:p[0],r.ShapeColorDB=0<=_.indexOf(h,r.ShapeColorDB)?r.ShapeColorDB:h[0],r.Title=0<=_.indexOf(s,r.Title)?r.Title:s[0],r.TrackedItem=0<=_.indexOf(s,r.TrackedItem)?r.TrackedItem:i,a.api.setProperty("possibleLabels",["none"].concat(s)),a.api.setProperty("possiblePLatLong",n),a.api.setProperty("possibleString",l),a.api.setProperty("possibleShapes",p),a.api.setProperty("possibleColors",h),a.api.setProperty("possibleTrack",s),a.api.setProperty("all",s)),a.applyPoints()})},M.prototype.onRouteViewStateRouting=function(t,e,i){this.api.setProperty(t+"."+e+".ViewstateProperty",i)},M.prototype.toIsoDate=function(t){var e=t;return e=t&&t.i?l.Tools.convertKDBTemporalToMoment(t).toDashString():e},M.prototype.tooltipsConvert=function(t,e){var i=this,o="";return"object"==typeof t?_.each(t,function(t){void 0!==e[t]&&(o=o+"<div>"+t+" : "+i.tooltipsConvertType(e[t])+"</div>")}):o=t,o},M.prototype.tooltipsConvertType=function(t){t="object"==typeof t&&t.class?t.toDate():t;return t},M.prototype.updatePointsTracker=function(){var e=this,i=this.api.getProperty("Points.Tracker"),o=this.api.getProperty("Points.Latitude"),r=this.api.getProperty("Points.Longitude"),a=this.api.getProperty("Points.TrackedItem"),t=this.pointcollection.models;""!==i&&_.each(t,function(t){_.isEqual(e.toIsoDate(t.get(a)),i)&&(t=new google.maps.LatLng(t.get(o),t.get(r)),e.map.setCenter(t),e.markers[0].setPosition(t))})};var D,et=M;function M(t){var e=D.call(this,t)||this;return e.websiteUrl="",e.options=t,e.api=e.options.api,e.pointModel=e.options.model,e.$el=e.options.el,e.map=e.options.map,e.websiteUrl=e.options.websiteUrl,e.pointcollection=e.options.collection,e.viewModel=e.options.viewModel,e.markers=e.options.markers,e.infoBubble=e.options.infoBubble,e.api=e.options.api,e.app=e.options.app,e.handles={},e}z.compareKDBTimes=function(t,e){return t.i>e.i?1:t.i<e.i?-1:t.n>e.n?1:t.n<e.n?-1:0},z.expandNestedViewStates=function(t,e){var i=!1,o=Object.keys(t);if(i=1===o.length?(r=e.getPropertyMeta(o[0]))&&"viewstate"===r.type:i){var r=/^((?:\w+\.)*)(\d+)/.exec(o[0]);if(r)return i=r[1].slice(0,-1),o=e.getProperty(i),(r={})[i]=o,r}return t},z.focus2Array=function(t){var e=[],i=/"([^"]*)"/g,t=t.toString?t.toString():"",o=/^\[([^\]]*)]$/.exec(t);if(null!==o){if(/^(?:"[^"\\]*(?:\\[\S\s][^"\\]*)*")(?:,"[^"\\]*(?:\\[\S\s][^"\\]*)*")*/.test(o[1]))for(var r=void 0;null!==(r=i.exec(o[1]));)e.push(_.map(r[1].split(","),function(t){return t.replace(/&#44;/g,",")}))}else e.push(t.split(","));return _.filter(e,function(t){return 0<(""+t).length})},z.getConditionResult=function(t,e,i,o){var a={isMatch:function(t,e){var i,o=!1,r=t.split(/ +and +| +/);for(_.includes(r,"or")&&(r=_.without(r,"or"),o=!0),i=0;i<r.length;i++)0!==r[i].indexOf("-")&&r[i].indexOf("*")<0&&(r[i]="*"+r[i]+"*");return _[o?"some":"every"](r,function(t){return a.isSimpleMatch(t,e)})},isSimpleMatch:function(t,e){var i=!1,t=(0===t.indexOf("-")&&(t=t.replace("-",""),i=!0),new RegExp("^"+t.replace(/\*/g,".*")+"$").test(e));return i?!t:t}},r=!1,s=isNaN(parseFloat(t))?(""+t).toLowerCase():parseFloat(t),n=isNaN(parseFloat(e))?(""+e).toLowerCase():parseFloat(e);switch(i){case"contains":r=0<=s.toString().indexOf(n.toString());break;case"starts with":r=0===s.toString().indexOf(n.toString());break;case"ends with":r=-1!==s.toString().indexOf(n.toString(),s.toString().length-n.toString().length);break;case"==":r=s===n;break;case"<":r=s<n;break;case">":r=n<s;break;case"<=":r=s<=n;break;case">=":r=n<=s;break;case"!=":r=s!==n;break;case"search":r=a.isMatch(n,s);break;case"regexp":r=new RegExp(e.toString()).test(t.toString())}return r=o?!r:r},z.getHexSaturation=function(t,e){t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!t)return"#ffffff";var i,o=t[1]?parseInt(t[1],16):0,r=t[2]?parseInt(t[2],16):0,a=t[3]?parseInt(t[3],16):0,t=Math.max(o,r,a),s=Math.min(o,r,a),n=t,l=t-s;if(t===s)i=0;else{switch(t){case o:i=(r-a)/l+(r<a?6:0);break;case r:i=(a-o)/l+2;break;case a:i=(o-r)/l+4}i/=6}s=.2+.8*e;var t=Math.floor(6*i),e=6*i-t,p=n*(1-s),h=n*(1-e*s),d=n*(1-(1-e)*s);switch(t%6){case 0:o=n,r=d,a=p;break;case 1:o=h,r=n,a=p;break;case 2:o=p,r=n,a=d;break;case 3:o=p,r=h,a=n;break;case 4:o=d,r=p,a=n;break;case 5:o=n,r=p,a=h}return o=parseInt(o.toString(),10),r=parseInt(r.toString(),10),a=parseInt(a.toString(),10),"#"+this.componentToHex(o)+this.componentToHex(r)+this.componentToHex(a)},z.getSaturatedArray=function(t){var l=this,t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!t)return["#ffffff"];var p,h,e=t[1]?parseInt(t[1],16):0,i=t[2]?parseInt(t[2],16):0,o=t[3]?parseInt(t[3],16):0,t=Math.max(e,i,o),r=Math.min(e,i,o),d=t,a=t-r;if(t===r)p=0;else{switch(t){case e:p=(i-o)/a+(i<o?6:0);break;case i:p=(o-e)/a+2;break;case o:p=(e-i)/a+4}p/=6}var c=[];return _.each([.2,.28,.36,.44,.52,.6,.68,.76,.84,.92,.1],function(t){h=t;var e,i,o,t=Math.floor(6*p),r=6*p-t,a=d*(1-h),s=d*(1-r*h),n=d*(1-(1-r)*h);switch(t%6){case 0:e=d,i=n,o=a;break;case 1:e=s,i=d,o=a;break;case 2:e=a,i=d,o=n;break;case 3:e=a,i=s,o=d;break;case 4:e=n,i=a,o=d;break;case 5:e=d,i=a,o=s}e=parseInt(e,10),i=parseInt(i,10),o=parseInt(o,10),c.push("#"+l.componentToHex(e)+l.componentToHex(i)+l.componentToHex(o))}),c},z.componentToHex=function(t){t=t.toString(16);return 1===t.length?"0"+t:t},z.isDuration=function(t){return _.get(t,"_kdbType")&&0<=["1216","1217","1218","1219"].indexOf(t._kdbType)},z.getFormatter=function(o,r,a,s){return"Number"===o||"Formatted Number"===o||"Smart Number"===o||"Datetime"===o||"Currency"===o||"SmartCurrency"===o?function(t){var e,i=t;if(null==(t="Smart Number"!==o&&"Formatted Number"!==o||_.isNumber(t)?t:_.isNumber(parseFloat(t))?parseFloat(t):t))return"";if("Smart Number"===o)i=_.isNumber(t)?l.Tools.smartFormatNumber(t,r):_.escape(t);else{if("Datetime"===o)return e=t,(moment.isMoment(t)||moment.isDuration(t)?z.isDuration(t)?l.Tools.convertValueToMoment(t.valueOf()):t:l.Tools.isKDBTemporal(t)?l.Tools.convertKDBTemporalToMoment(t):("number"==typeof t&&(e=new Date(t)),l.Tools.convertDateStringValueToMoment(e.toString()))).format(s);i="Formatted Number"===o&&t.toFixed?_.isNaN(t)?"":l.Tools.formatNumber(t,r):t.toFixed?t.toFixed(r):_.escape(i)}if(a&&0<=i.toString().indexOf(".")){for(;"0"===i[i.length-1];)i=i.slice(0,-1);"."===i[i.length-1]&&(i=i.slice(0,-1))}return i}:"Boolean"===o?function(t){return _.escape(t)}:function(t){return moment.isMoment(t)||moment.isDuration(t)?t.format(o,void 0):_.escape(t)}},z.pump=function(i){var t,o,r;return null==i||!_.isObject(i)||(t=Object.getPrototypeOf(i),_.isObject(i)&&t!==Object.prototype&&t!==Array.prototype)?i:t===Array.prototype&&_.isArray(i)?i.map(z.pump):(o=/^(\d+)((?:\.\w+)+)$/,Object.keys(i).every(function(t){return o.test(t)})?Object.keys(i).map(function(t){var e=o.exec(t);return _.isNil(e)?{index:0,tail:void 0,value:void 0}:{index:Number(e[1]),tail:e[2].substring(1),value:i[t]}}).reduce(function(t,e){var i={},o=void 0===e.index?0:e.index;return i[o]={},i[o][e.tail]=e.value,$.extend(!0,t,z.pump(i))},[]):(r={greedy:/^(\w+)((?:\.\w+)*)$/,nonGreedy:/^(\w+)((?:\.\w+)+)$/},Object.keys(i).some(function(t){return r.nonGreedy.test(t)})?Object.keys(i).map(function(t){var e=r.greedy.exec(t);return{head:_.isNil(e)?null:e[1],tail:_.isNil(e)||""===e[2]?null:e[2].substring(1),value:i[t]}}).reduce(function(t,e){var i={},o=null!==e.tail,r=_.isNil(e.head)?0:e.head,a=_.isNil(e.tail)?0:e.tail;return o?(i[r]={},i[r][a]=e.value):i[r]=e.value,$.extend(!0,t,z.pump(i))},{}):_.mapValues(i,z.pump)))},z.replaceViewStatesWithValue=function(t,e,i){return z.replaceViewStates(t,e,function(t,e,i,o){return o.value},i)},z.replaceViewStatesWithModel=function(t,e,o){return z.replaceViewStates(t,e,function(t,e,i){return i instanceof d.Model&&i.get("_viewType")?i:(t=o.getProperty(t)[e],_.isUndefined(i)?void 0:(t.get("value")!==i&&t.set("value",i),t))},o)},z.replaceViewStates=function(i,t,l,p){var h;return h=function(t,e){return function i(t,e,o){o=o?o+".":"";var r,a,s=p.getPropertyMeta(o+(e+="")),n=t&&t.has&&t.has("_dataSource")&&t.has("_dataType"),n=(_.isArray(t)||_.isObject(t))&&!n;return s&&"data"===s.type?t:s&&"viewstate"===s.type?(r=(a=(o+e).split(".")).pop(),a=a.join("."),l(a,void 0===r?"":r,t,s)):n?(o+=e,h=function(t,e){return i(t,e,o)},(_.isArray(t)?_.map:_.mapValues)(t,h)):t}(t,e,i||"")},(_.isArray(t)?_.map:_.mapValues)(t,h)};var B=z;function z(){}var V,I=[];function R(t){var e=V.call(this,t)||this;return e.markers=[],e.websiteUrl="",e.isPivot=!1,e.firstTime=!0,e.rectangle=[],e.heatmapprimaryKey="_rowIndex",e.options=t,R.viewModel=t.viewModel,e.api=t.api,e.$el.html(G.app()),e.$root=e.$el.find(">.GeoMap"),e.$frame=e.$el.find(".frame"),e.$title=e.$el.find(".title"),e.$map=e.$el.find(".googleMap"),e.hideErrorMessage=t.api.hideErrorMessage,e.showErrorMessage=t.api.showErrorMessage,e.websiteUrl=void 0===t.websiteUrl?window.location.href:t.websiteUrl,e.id=t.componentModel.cid,e.handles={},e}return V=d.View,e(R,V),R.prototype.initPointsCollection=function(){this.pointprimaryKey="_rowIndex",this.pointcollection=new d.Collection([],{model:d.Model.extend({idAttribute:this.pointprimaryKey})}),this.pointcolumnInfo=new d.Collection([],{model:d.Model.extend({idAttribute:"id"})}),this.pointcollection.id=this.pointprimaryKey,this.pointcolumnInfo.id="id",this.pointcolumnInfo.comparator="index",this.pointsSrc=this.api.getProperty("Points").Data},R.prototype.onSettingsChange=function(t){this.firstTime&&(this.firstTime=!1,this.applyTheme());t=B.expandNestedViewStates(t,this.api),t=B.replaceViewStatesWithValue("",t,this.api),t=B.pump(t);this.onSettingsChangeProcessed.call(this,t)},R.prototype.onSettingsChangeProcessed=function(t){var e,i,o,r,a,s=this;_.get(t,"MapDetails.MapKey")&&this.loadMapAPI(),"undefined"!=typeof google?this.updateGoogleAPIDependentSettings(t):(e=0,i=setInterval(function(){"undefined"!=typeof google&&(s.updateGoogleAPIDependentSettings(t),window.clearInterval(i)),5==++e&&window.clearInterval(i)},500)),_.isNil(_.get(t,"MapDetails.Style"))||this.applyTheme(),this.map&&(r=!_.isNil(_.get(t,"MapDetails.CenterX")),a=!_.isNil(_.get(t,"MapDetails.CenterY")),r||a)&&(o=this.map.getCenter(),r=r?Number(this.api.getProperty("MapDetails.CenterX")):o.lat(),a=a?Number(this.api.getProperty("MapDetails.CenterY")):o.lng(),this.map.setCenter({lat:r,lng:a}))},R.prototype.updateGoogleAPIDependentSettings=function(t){var e=this;_.get(t,"Points.Data")?(this.pointsView||this.initPoints(),this.pointsSrc=this.api.getProperty("Points").Data,this.applyDataProperty(this.pointsSrc,"point")):_.get(t,"Points.Tracker")&&this.pointsView?this.pointsView.updatePointsTracker():_.get(t,"Points.PointsInView")&&this.pointsView?this.pointsView.centerOnCollection():_.get(t,"Points")&&this.pointsView&&this.pointsView.applyPoints(),!_.isNil(_.get(t,"MapDetails.Style"))&&this.pointsView&&this.setMapStyle(),_.get(t,"Circles.Data")&&this.pointsView&&(this.circlesSrc=this.api.getProperty("Circles").Data,this.applyDataProperty(this.circlesSrc,"circles")),_.get(t,"Circles.Latitude")&&this.pointsView&&this.circlesView.applyCircles(),_.get(t,"Circles.Latitude")&&this.pointsView&&this.circlesView.applyCircles(),_.get(t,"Heatmap.Data")&&(""===this.api.getProperty("Heatmap").Data&&this.heatmapView.cleanHeatmap(),this.heatmapSrc=this.api.getProperty("Heatmap").Data,this.applyDataProperty(this.heatmapSrc,"heatmap")),_.get(t,"Heatmap")&&this.heatmapView.applyHeatmap(),_.get(t,"OverLay.layerProperties.Data")&&(this.dataSrc=this.api.getProperty("OverLay.layerProperties").Data,""===this.dataSrc?(this.overlayView.$el.find(".over").remove(),this.overlayView.data.forEach(function(t){e.overlayView.data.remove(t)}),this.overlayView.overlay.setMap(null)):this.applyDataProperty(this.dataSrc,"overlay")),(_.get(t,"OverLay.layerProperties.DataGeo")||_.get(t,"OverLay.layerProperties.GeoColumn"))&&_.get(this.overlayView,"overlay.draw")&&this.overlayView.overlay.draw("updateLayer"),(_.get(t,"OverLay.layerProperties.DataKey")||_.get(t,"OverLay.layerProperties.DataValue")||_.get(t,"OverLay.layerProperties.LayerOpacity")||_.get(t,"OverLay.layerProperties.ShowLegend")||_.get(t,"OverLay.layerProperties.LegendType")||_.get(t,"OverLay.layerProperties.Selected"))&&_.get(this.overlayView,"overlay")&&this.overlayView.overLaySetStyle(),(_.get(t,"OverLay.layerProperties.Bounds")||_.get(t,"OverLay.layerProperties.ImageSr")||_.get(t,"OverLay.layerProperties.ImageNorth")||_.get(t,"OverLay.layerProperties.ImageSouth")||_.get(t,"OverLay.layerProperties.ImageEast")||_.get(t,"OverLay.layerProperties.ImageWest")||_.get(t,"OverLay.layerProperties.ImageOpacity")||_.get(t,"OverLay.SelectedObjectRoutingd"))&&_.get(this.overlayView,"overlay")&&this.overlayView.applyOverlay(),(_.get(t,"Lines.Latitude")||_.get(t,"Lines.Longitude")||_.get(t,"Lines.Selected")||_.get(t,"Lines.ShowTooltip")||_.get(t,"Lines.LabelColor")||_.get(t,"Lines.LabelSize")||_.get(t,"Lines.LabelText")||_.get(t,"Lines.ShowLabel")||_.get(t,"Lines.Geodesic")||!_.isNil(_.get(t,"Lines.ShowInView")))&&this.lineView&&this.lineView.applyLine(),_.get(t,"Lines.Data")&&(this.linesSrc=this.api.getProperty("Lines").Data,this.applyDataProperty(this.linesSrc,"line")),_.get(t,"Bounds")&&this.applyBounds(),_.get(t,"MapDetails.Bounds")&&this.boundsChanged(),(_.get(t,"MapDetails.Type")||_.get(t,"Basics.Theme"))&&this.applyTheme()},R.prototype.applyDataProperty=function(t,e){var i;"line"===e&&(i=this.lnModel),"circle"===e&&(i=this.circlesModel),"point"===e&&(i=this.pointcollection),"heatmap"===e&&(i=this.heatmapModel),(i="overlay"===e?this.dataModel:i)&&(this.stopListening(i),this.api.unsubscribe(i)),i=t,"line"===e&&this.api.subscribe(i,this.onDataLn.bind(this)),"overlay"===e&&this.api.subscribe(i,this.onDataOl.bind(this)),"point"===e&&this.api.subscribe(i,this.onDataPt.bind(this)),"circles"===e&&this.api.subscribe(i,this.onDataCir.bind(this)),"heatmap"===e&&this.api.subscribe(i,this.onDataHm.bind(this))},R.prototype.onDataLn=function(t,e){this.onData(t,e,"line")},R.prototype.onDataOl=function(t,e){this.onData(t,e,"overlay")},R.prototype.onDataCir=function(t,e){this.onData(t,e,"circles")},R.prototype.onDataPt=function(t,e){this.onData(t,e,"point")},R.prototype.onDataHm=function(t,e){this.onData(t,e,"heatmap")},R.prototype.loadMapAPI=function(){var e,i=this,o=this.api.getProperty("MapDetails.MapKey");""!==o?(window.initMap=function(){_.each(I,function(t){t.initializeMaps()}),I=[]},(e=document.createElement("script")).src="https://maps.googleapis.com/maps/api/js?key="+o+"&v=weekly&libraries=visualization,geometry&callback=initMap&nonce='base64value'",e.defer=!0,e.async=!0,e.id="gMaps",o=document.getElementsByTagName("script"),I.push(this),void 0===_.find(o,{id:"gMaps"})?document.head.appendChild(e):1===I.length&&(this.initializeMaps(),I=[]),this.api.hideQueryStatus()):_.defer(function(){i.api.showQueryStatus({message:t('Required: Set Google Maps JavaScript API Key in "Map Key" Property'),type:"Warning"})},500)},R.prototype.initializeMapEvents=function(){var e=this,t=this.api.getProperty("MapDetails");google.maps.event.trigger(this.map,"resize"),this.handles[this.handles.length]=this.map.addListener("center_changed",function(){t.TrackChanges&&e.map.center&&(e.api.setProperty("MapDetails.CenterX",e.map.center.lat()),e.api.setProperty("MapDetails.CenterY",e.map.center.lng())),e.setBounds()}),this.handles[this.handles.length]=this.map.addListener("zoom_changed",function(){t.TrackChanges&&e.api.setProperty("MapDetails.Zoom",e.map.zoom),e.setBounds()}),this.handles[this.handles.length]=this.map.addListener("tilesloaded",function(){e.setBounds()}),this.handles[this.handles.length]=this.map.addListener("maptypeid_changed",function(){t.TrackChanges&&e.api.setProperty("MapDetails.Type",e.map.mapTypeId)}),this.api.getProperty("MapDetails.CustomMarkers")&&this.addDropPoint(),this.handles[this.handles.length]=google.maps.event.addListener(this.map,"rightclick",function(t){return e.addContextMenu(t.latLng),t.preventDefault(),t.stopPropogation(),!1})},R.prototype.initializeMaps=function(){var e=this,t=(this.boundsChanged=_.throttle(function(){var t;""!==e.api.getProperty("MapDetails.Bounds")&&4===(t="string"==typeof(t=e.api.getProperty("MapDetails.Bounds"))?t.split(","):t).length&&.1<Math.abs(parseFloat(t[2])-e.map.getBounds().getNorthEast().lat())&&e.map.fitBounds(new google.maps.LatLngBounds(new google.maps.LatLng(parseFloat(t[0]),parseFloat(t[1])),new google.maps.LatLng(parseFloat(t[2]),parseFloat(t[3]))))},1e3),this.setBounds=_.debounce(function(){var t=e.map.getBounds().toUrlValue().split(",");""!==e.api.getProperty("MapDetails.Bounds")&&e.api.setProperty("MapDetails.Bounds",t)},500),this.infoBubble=new p({content:"",arrowSize:0}),this.api.getProperty("MapDetails.Style").replace(/(['"])?([a-zA-Z0-9]+)(['"])?:/g,'"$2":')),i=this.api.getProperty("MapDetails.CenterX"),o=this.api.getProperty("MapDetails.CenterY"),r=this.api.getProperty("MapDetails.Type"),a=this.api.getProperty("MapDetails.Zoom"),s=n.select(this.$frame.find(".googleMap")[0]).node(),s=new google.maps.Map(s,{center:new google.maps.LatLng(i,o),mapTypeControlOptions:{mapTypeIds:["roadmap","satellite","hybrid","terrain","light_theme","dark_theme"]},mapTypeId:google.maps.MapTypeId[r.toUpperCase()]||"terrain",zoom:a,zoomControl:!0,disableDefaultUI:!0,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1});""!==t&&s.setOptions({styles:JSON.parse(t)}),this.rectangle=[],this.map=s,this.initPoints(),this.initCircles(),this.initHeatmap(),this.initOverlay(),this.initLine(),this.initializeMapEvents()},R.prototype.setMapStyle=function(){var i=this,e=this.api.getProperty("MapDetails.Style").replace(/(['"])?([a-zA-Z0-9]+)(['"])?:/g,'"$2":');try{this.api.hideQueryStatus();var o=""===e?[]:JSON.parse(e);this.map&&this.map.setOptions({styles:o})}catch(e){_.defer(function(){i.api.showQueryStatus({message:t("Map Style format: "+e),type:"Warning"})},500)}},R.prototype.initLine=function(){this.lineprimaryKey="_rowIndex",this.linecollection=new d.Collection([],{model:d.Model.extend({idAttribute:this.lineprimaryKey})}),this.linecolumnInfo=new d.Collection([],{model:d.Model.extend({idAttribute:"id"})}),this.linecollection.id=this.lineprimaryKey,this.linecolumnInfo.id="id",this.linecolumnInfo.comparator="index",this.linesSrc=this.api.getProperty("Lines").Data,this.initLineView()},R.prototype.initLineView=function(){this.lineView=new Y({el:this.$el,api:this.api,map:this.map,collection:this.linecollection})},R.prototype.initOverlay=function(){this.dataprimaryKey="_rowIndex",this.datacollection=new d.Collection([],{model:d.Model.extend({idAttribute:this.dataprimaryKey})}),this.datacolumnInfo=new d.Collection([],{model:d.Model.extend({idAttribute:"id"})}),this.datacollection.id=this.dataprimaryKey,this.datacolumnInfo.id="id",this.datacolumnInfo.comparator="index",this.dataSrc=_.get(this.api.getProperty("OverLay"),"layerProperties.Data"),this.initOverlayView()},R.prototype.initOverlayView=function(){this.overlayView&&this.overlayView.removeOverlay(),this.overlayView=new tt({el:this.$el,api:this.api,map:this.map,overlaySrc:this.dataSrc,dataModel:this.dataModel,websiteUrl:this.websiteUrl,datacollection:this.datacollection})},R.prototype.initHeatmap=function(){this.heatmapprimaryKey="_rowIndex",this.heatmapcollection=new d.Collection([],{model:d.Model.extend({idAttribute:this.heatmapprimaryKey})}),this.heatmapcolumnInfo=new d.Collection([],{model:d.Model.extend({idAttribute:"id"})}),this.heatmapcollection.id=this.heatmapprimaryKey,this.heatmapcolumnInfo.id="id",this.heatmapcolumnInfo.comparator="index",this.heatmapSrc=this.api.getProperty("Heatmap").Data,this.initHeatmapView()},R.prototype.initHeatmapView=function(){this.heatmapView=new K({el:this.$el,api:this.api,map:this.map,collection:this.heatmapcollection})},R.prototype.initCircles=function(){this.circlesprimaryKey="_rowIndex",this.circlescollection=new d.Collection([],{model:d.Model.extend({idAttribute:this.circlesprimaryKey})}),this.circlescolumnInfo=new d.Collection([],{model:d.Model.extend({idAttribute:"id"})}),this.circlescollection.id=this.circlesprimaryKey,this.circlescolumnInfo.id="id",this.circlescolumnInfo.comparator="index",this.circlesSrc=this.api.getProperty("Circles.Data"),this.initCirclesView()},R.prototype.initCirclesView=function(){this.circlesView=new F({api:this.api,collection:this.circlescollection,el:this.$el,map:this.map}),this.circlesView.applyCircles()},R.prototype.initPoints=function(){this.initPointsCollection(),this.initPointsView()},R.prototype.remove=function(){return _.each(this.handles,function(t){google.maps.event.removeListener(t)}),this},R.prototype.initPointsView=function(){this.pointsView=new et({el:this.$el,api:this.api,map:this.map,markers:this.markers,websiteUrl:this.websiteUrl,collection:this.pointcollection,infoBubble:this.infoBubble,app:this})},R.prototype.applyTheme=function(){var t=this.api.getProperty("Basics.Theme"),e=this.api.getProperty("MapDetails.Type"),i=this.api.getProperty("MapDetails.Style");this.map&&e&&(this.map.setMapTypeId(e),e="Light"===t?R.RETRO_THEME:R.STANDARD_THEME,""!==i&&i!==R.RETRO_THEME&&i!==R.STANDARD_THEME||(this.api.setProperty("MapDetails.Style",e),this.map.setOptions({styles:JSON.parse(e)})))},R.prototype.getCanvasXY=function(t){var e=Math.pow(2,this.map.getZoom()),i=new google.maps.LatLng(this.map.getBounds().getNorthEast().lat(),this.map.getBounds().getSouthWest().lng()),i=this.map.getProjection().fromLatLngToPoint(i),t=this.map.getProjection().fromLatLngToPoint(t);return new google.maps.Point(Math.floor((t.x-i.x)*e),Math.floor((t.y-i.y)*e))},R.prototype.onData=function(e,t,i){var o,r,a,s,n,l=!1,p=e.columns;"heatmap"===i?(a=this.heatmapcollection,n=this.heatmapcolumnInfo,s=this.heatmapSrc||""===this.heatmapSrc?this.api.getProperty("Heatmap").Data:this.heatmapSrc):"circles"===i?(a=this.circlescollection,n=this.circlescolumnInfo,s=this.circlesSrc||""===this.circlesSrc?this.api.getProperty("Circles").Data:this.circlesSrc):"point"===i?(a=this.pointcollection,n=this.pointcolumnInfo,s=this.pointsSrc||""===this.pointsSrc?this.api.getProperty("Points").Data:this.pointsSrc):"overlay"===i?(a=this.datacollection,n=this.datacolumnInfo,s=this.dataSrc||""===this.dataSrc?this.api.getProperty("OverLay.layerProperties").Data:this.dataSrc):"line"===i&&(a=this.linecollection,n=this.linecolumnInfo,s=this.linesSrc||""===this.linesSrc?this.api.getProperty("Lines").Data:this.linesSrc),void 0!==s&&""!==s&&(p.reset?n.reset(e.columns.reset):(n.remove(_.map(p.remove,function(t){return t[e.primaryKey]})),n.add(p.add),n.add(p.change,{merge:!0})),o=_.some(["add","remove","reset","change"],function(t){return void 0!==p[t]}),n.sort(),r=_.map(n.models,function(t){return t.get("id")}),(r=this.isPivot&&void 0===s.get("_breakdownCols")?r:s.get("_breakdownCols"))instanceof d.Model&&(r=r.get("value")),o&&("line"===i&&this.lineView&&this.lineView.columSpecToColumnData(n,a),"point"===i?this.pointsView&&this.pointsView.columSpecToColumnData(n,a):"overlay"===i?this.overlayView&&this.overlayView.columSpecToColumnData(n,a):"heatmap"===i?this.heatmapView&&this.heatmapView.columSpecToColumnData(n,a):"circles"===i&&this.circlesView&&this.circlesView.columSpecToColumnData(n,a)),l=(t.reset?a.reset(t.reset):(a.remove(_.map(t.remove,function(t){return t[e.primaryKey]})),a.add(t.add),a.add(t.change,{merge:!0})),!0),"line"===i?this.linecollection=a:"point"===i?this.pointcollection=a:"circles"===i?this.circlescollection=a:"heatmap"===i?this.heatmapcollection=a:"overlay"===i&&(this.datacollection=a),l)&&("point"===i?this.pointsView.applyPoints():"circles"===i?this.circlesView.applyCircles():"heatmap"===i?this.heatmapView.applyHeatmap():"overlay"===i?this.overlayView.overlay.draw("updateLayer"):"line"===i&&this.lineView.applyLine())},R.prototype.addContextMenu=function(t){var e=this,i=document.createElement("div");this.$el.find(".contextmenu").remove(),i.className="contextmenu",i.innerHTML='<div><img class="closecontextMenu" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuOWwzfk4AAAHQSURBVDhPfZM7S0NBEIVvEtCgGNDC0kIJ2NnGQhTERxC0MXaCWJlgOgtBktyb98NGopWNIIhE9B8o+BdEGzsVU4gvkPhISOK3ya7cxOjAYWbPnJm7O3dXa7ZEItFtGMYEWNN1fSccDmeJV8FwKBSyS9lvy+Vytmg0OoXoMhgMfuCrJlTg3vBnsVhsEG+VZXUTxZC+QCDQXNgK+UgkMilL6xaPx2dJfDYJ/8NzKpVy1opZ9IJrleTceUPX99lyWXHEJWawS+7FxB37/f52jcQciy8lROSlexf8nmxSZJARfAfcNr4itOAB3ikaRCWhOufhRjKZTCeCLeJ1eDvxArmfHYAKQ58RDQ5MpGpyL5pUq1ULayuYhyuYNQLsdqNlA1Ck+wojsng8HhtfT8njNOjE7jS6GGYSYUme2c7vmsa7gAOxmonSlfmIW+zADVH7hYKkYYxYnbnA+gnNOJyD+EjoJPKgX/zGHoRXkqwgOuXLXjjzwG5puIS/UBxND/Ft6i6MUfCqksQlFbfiuLE3yWSyr1YsTAyKxDKidyX6C+zwDu+SpQ1m4aGMIjinkXg45kJxeR7JnaTT6QGpb20IHZx3CO/DZ/GbFC7ixStses6a9g15deRblCQyrwAAAABJRU5ErkJggg==" /><a class="addPoint">Add Point</a><a class="centreMap">Centre Map</a></div>',$(this.map.getDiv()).append(i),this.setMenuXY(t),i.style.visibility="visible",this.$el.find(".addPoint").click(function(){e.api.setProperty("dropPoint",t),e.api.getProperty("MapDetails.CustomMarkers")&&(e.api.setProperty("MapDetails.CustomMarkers",t),e.addDropPoint()),e.$el.find(".contextmenu")&&e.$el.find(".contextmenu").remove()}),this.$el.find(".centreMap").click(function(){e.map.setCenter(t),e.$el.find(".contextmenu")&&e.$el.find(".contextmenu").remove()}),this.$el.find(".closecontextMenu").click(function(){e.$el.find(".contextmenu")&&e.$el.find(".contextmenu").remove()})},R.prototype.setMenuXY=function(t){var e=this.$el.width(),i=this.$el.height(),o=this.$el.find(".contextmenu").width(),r=this.$el.find(".contextmenu").height(),t=this.getCanvasXY(t),a=t.x,t=t.y;(_.isNil(e)?0:e)-a<(o=_.isNil(o)?0:o)&&(a-=o),(_.isNil(i)?0:i)-t<(r=_.isNil(r)?0:r)&&(t-=r),this.$el.find(".contextmenu").css("left",a),this.$el.find(".contextmenu").css("top",t)},R.prototype.addDropPoint=function(){var t,e,i=this.api.getProperty("MapDetails");i.CustomMarkers&&""!==(e="string"==typeof(e=i.CustomMarkers.get("value"))&&2===(t=e.replace(")","").replace("(","").split(",")).length?new google.maps.LatLng(parseFloat(t[0]),parseFloat(t[1])):e)&&(this.dropmarker&&this.dropmarker.setMap(null),i.CustomMarkers.set("_default",e),this.dropmarker=new google.maps.Marker({map:this.map,draggable:!1,title:"",position:e}),this.dropmarker.id="drop")},R.prototype.applyBounds=function(){var o=this,t=this.api.getProperty("Bounds");_.each(this.rectangle,function(t){t.setMap(null)}),_.each(t,function(t,i){_.isEmpty(t)||(t={north:parseFloat(o.api.getProperty("Bounds."+i+".North")),south:parseFloat(o.api.getProperty("Bounds."+i+".South")),east:parseFloat(o.api.getProperty("Bounds."+i+".East")),west:parseFloat(o.api.getProperty("Bounds."+i+".West"))},o.rectangle[i]?o.rectangle[i]=new google.maps.Rectangle({bounds:t,editable:!0,draggable:!0}):(t=new google.maps.Rectangle({bounds:t,editable:!0,draggable:!0}),o.rectangle.push(t)),o.rectangle[i].setMap(o.map),google.maps.event.clearInstanceListeners(o.rectangle[i]),o.handles[o.handles.length]=o.rectangle[i].addListener("bounds_changed",function(){var t=o.rectangle[i],e=t.getBounds().getNorthEast(),t=t.getBounds().getSouthWest();o.api.setProperty("Bounds."+i+".North",e.lat()),o.api.setProperty("Bounds."+i+".South",t.lat()),o.api.setProperty("Bounds."+i+".East",e.lng()),o.api.setProperty("Bounds."+i+".Wesr",t.lng())}))})},R.getComponentDefinition=E.getComponentDefinition,R.STANDARD_THEME="[]",R.RETRO_THEME='[ { "elementType": "geometry", "stylers": [ { "color": "#ebe3cd" } ] }, { "elementType": "labels.text.fill", "stylers": [ { "color": "#523735" } ] }, { "elementType": "labels.text.stroke", "stylers": [ { "color": "#f5f1e6" } ] }, { "featureType": "administrative", "elementType": "geometry.stroke", "stylers": [ { "color": "#c9b2a6" } ] }, { "featureType": "administrative.land_parcel", "elementType": "geometry.stroke", "stylers": [ { "color": "#dcd2be" } ] },  { "featureType": "administrative.land_parcel", "elementType": "labels.text.fill",  "stylers": [ { "color": "#ae9e90" } ] }, { "featureType": "landscape.natural", "elementType": "geometry", "stylers": [ { "color": "#dfd2ae" } ] },  { "featureType": "poi", "elementType": "geometry", "stylers": [ { "color": "#dfd2ae" } ] },  { "featureType": "poi", "elementType": "labels.text.fill", "stylers": [ { "color": "#93817c" } ] },  { "featureType": "poi.park", "elementType": "geometry.fill", "stylers": [ { "color": "#a5b076" } ] }, { "featureType": "poi.park", "elementType": "labels.text.fill", "stylers": [ { "color": "#447530" } ] },  { "featureType": "road", "elementType": "geometry", "stylers": [ { "color": "#f5f1e6" } ] },  { "featureType": "road.arterial", "elementType": "geometry", "stylers": [ { "color": "#fdfcf8" } ] },  { "featureType": "road.highway", "elementType": "geometry", "stylers": [ { "color": "#f8c967" } ] },  { "featureType": "road.highway", "elementType": "geometry.stroke", "stylers": [ { "color": "#e9bc62" } ] },  { "featureType": "road.highway.controlled_access", "elementType": "geometry",  "stylers": [ { "color": "#e98d58" } ] }, { "featureType": "road.highway.controlled_access", "elementType": "geometry.stroke", "stylers": [ { "color": "#db8555" } ] },  { "featureType": "road.local", "elementType": "labels.text.fill", "stylers": [ { "color": "#806b63" } ] }, { "featureType": "transit.line", "elementType": "geometry", "stylers": [ { "color": "#dfd2ae" } ] },  { "featureType": "transit.line", "elementType": "labels.text.fill", "stylers": [ { "color": "#8f7d77" } ] }, { "featureType": "transit.line", "elementType": "labels.text.stroke", "stylers": [ { "color": "#ebe3cd" } ] }, { "featureType": "transit.station", "elementType": "geometry", "stylers": [ { "color": "#dfd2ae" } ] },  { "featureType": "water", "elementType": "geometry.fill", "stylers": [ { "color": "#b9d3c2" } ] }, { "featureType": "water", "elementType": "labels.text.fill", "stylers": [ { "color": "#92998d" } ] }]',R});